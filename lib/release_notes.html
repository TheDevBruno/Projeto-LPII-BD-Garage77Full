<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="keywords" content="jaybird, firebird, jdbc, sql, database, java">
<title>Jaybird 6.0.2 Release Notes</title>
<style>
/*! Firebird documentation stylesheet, derived from Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
@import url(https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400,700&display=swap);
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:rgba(0,0,0,.85);font-weight:normal;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:bold;font-style:normal;color:rgba(0,0,0,.85);text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small,h7 small{font-size:60%;color:rgba(77,77,77,.85);line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6,h7{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:normal;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{line-height:1.2}
    h1{font-size:2.75em}
    h2{font-size:2.3125em}
    h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
    h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#FFEFD5}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong,h7 strong{font-weight:bold}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre,h1,h2,h3,#toctitle,h4,h5,h6,h7):not([class^=L])>code{font-size:.9375em;font-style:normal!important;background:inherit;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:normal}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:normal}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#preheader>div.fb-logo,#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:1.25em;padding-right:1.25em}
#preheader>div.fb-logo:before,#preheader > div.fb-logo:after,#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#preheader>div.fb-logo:after,#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:rgba(0,0,0,.85);font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
    body.toc2{padding-left:15em;padding-right:0}
    #toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
    #toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
    #toc.toc2>ul{font-size:.9em;margin-bottom:0}
    #toc.toc2 ul ul{margin-left:0;padding-left:1em}
    #toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
    body.toc2.toc-right{padding-left:0;padding-right:15em}
    body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
    #toc.toc2{width:20em}
    #toc.toc2 #toctitle{font-size:1.375em}
    #toc.toc2>ul{font-size:.95em}
    #toc.toc2 ul ul{padding-left:1.25em}
    body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
    .sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor,h7>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:normal}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before,h7>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover,h7:hover>a.anchor,h7>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link,h7>a.link{color:rgba(0,0,0,.85);text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover,h7>a.link:hover{color:rgba(0,0,0,.85)}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1.0625rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:rgba(0,0,0,.85);margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#FFFFF7}
.literalblock.output pre{color:#FFFFF7;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#FFFFF7}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:rgba(0,0,0,.85);text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
table.stripes-none>*>tr{background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#FFEFD5}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
dl dt code{font-weight:bold}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:normal;font-style:normal}
.unstyled dl dt code{font-weight:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
h1 code,h2 code,h3 code,#toctitle code,.sidebarblock>.content>.title code,h4 code,h5 code,h6 code,h7 code{font-size:inherit}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
div.sect1,div.sect2,div.sect3,div.sect4,div.sect5,div.sect6{margin-top:2em}
div#preheader>div.fb-docindex table{background-color:#f8f8f7;width:100%}
div#preheader table{border:none}
#tocbot{overflow-y:auto}
#tocbot>.toc-list{overflow:hidden;position:relative}
#tocbot>.toc-list li{list-style:none}
#tocbot .toc-list{margin:0;padding-left:10px}
@media screen {#tocbot a.toc-link{height:100%}
    #tocbot .is-collapsible{overflow:hidden}
    #tocbot .is-collapsed{max-height:0}
    #tocbot .is-position-fixed{position:fixed!important;top:0}
    #tocbot .is-active-link{font-weight:700}
    #tocbot .toc-link::before{background-color:#EEE;content:' ';display:inline-block;height:inherit;left:0;margin-top:-1px;position:absolute;width:2px}
    #tocbot .is-active-link::before{background-color:#54BC4B}}
@media print{#tocbot #tocbot a.toc-link.node-name--H4{display:none}}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
    html{font-size:80%}
    a{color:inherit!important;text-decoration:underline!important}
    a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
    a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
    abbr[title]{border-bottom:1px dotted}
    abbr[title]::after{content:" (" attr(title) ")"}
    pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
    thead{display:table-header-group}
    svg{max-width:100%}
    p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
    h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
    #header,#content,#footnotes,#footer{max-width:none}
    #toc,.sidebarblock,.exampleblock>.content{background:none!important}
    #toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
    body.book #header{text-align:center}
    body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
    body.book #header .details{border:0!important;display:block;padding:0!important}
    body.book #header .details span:first-child{margin-left:0!important}
    body.book #header .details br{display:block}
    body.book #header .details br+span::before{content:none!important}
    body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
    body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
    .listingblock code[data-lang]::before{display:block}
    #footer{padding:0 1.25em}
    .hide-on-print{display:none!important}
    .print-only{display:block!important}
    .hide-for-print{display:none!important}
    .show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
    .sect1{padding:0!important}
    .sect1+.sect1{border:0}
    #footer{background:none}
    #footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
/* Additional Firebird customizations */
.hdlist.compact p{margin-bottom:0}
.hdlist td.hdlist1,.hdlist td.hdlist2{padding-bottom:0}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<link rel="canonical" href="https://firebirdsql.org/docs/drivers/java/6.0.x/release_notes.html"/>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jaybird 6.0.2 Release Notes</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#jaybird-6-0-x-changelog">1. Jaybird 6.0.x changelog</a>
<ul class="sectlevel2">
<li><a href="#_jaybird_6_0_2">1.1. Jaybird 6.0.2</a></li>
<li><a href="#_jaybird_6_0_1">1.2. Jaybird 6.0.1</a></li>
<li><a href="#_jaybird_6_0_0">1.3. Jaybird 6.0.0</a></li>
<li><a href="#jaybird-6-0-0-beta-1-changelog">1.4. Jaybird 6.0.0-beta-1</a></li>
</ul>
</li>
<li><a href="#known-issues">2. Known issues</a></li>
<li><a href="#general-notes">3. General Notes</a>
<ul class="sectlevel2">
<li><a href="#about-this-version">3.1. About this version</a></li>
<li><a href="#supported-firebird-versions">3.2. Supported Firebird versions</a></li>
<li><a href="#supported-java-versions">3.3. Supported Java versions</a></li>
<li><a href="#specification-support">3.4. Specification support</a></li>
</ul>
</li>
<li><a href="#support">4. Support</a>
<ul class="sectlevel2">
<li><a href="#where-to-get-help">4.1. Where to get help</a></li>
<li><a href="#contributing">4.2. Contributing</a></li>
<li><a href="#reporting-bugs">4.3. Reporting bugs</a></li>
</ul>
</li>
<li><a href="#getting-jaybird-6">5. Getting Jaybird 6</a>
<ul class="sectlevel2">
<li><a href="#jaybird-version_wo_target">5.1. Jaybird 6.0.2</a></li>
</ul>
</li>
<li><a href="#upgrading-from-jaybird-5-to-jaybird-6">6. Upgrading from Jaybird 5 to Jaybird 6</a>
<ul class="sectlevel2">
<li><a href="#maven-2">6.1. Maven</a></li>
<li><a href="#manual-install">6.2. Manual install</a></li>
<li><a href="#gotchas">6.3. Gotcha&#8217;s</a></li>
</ul>
</li>
<li><a href="#whats-new-in-jaybird-6">7. What&#8217;s new in Jaybird 6</a>
<ul class="sectlevel2">
<li><a href="#jaybird-version-numbering">7.1. Changes in version numbering</a></li>
<li><a href="#java-support">7.2. Java support</a></li>
<li><a href="#firebird-support">7.3. Firebird support</a></li>
<li><a href="#unsupported-protocol">7.4. Pure Java will not connect to unsupported Firebird versions by default</a></li>
<li><a href="#native-plugin">7.5. NATIVE and EMBEDDED support moved to a separate artifact</a></li>
<li><a href="#ooremote-removed">7.6. OOREMOTE (OpenOffice/LibreOffice protocol) removed</a></li>
<li><a href="#modules">7.7. Modularization of Jaybird</a></li>
<li><a href="#create-database-if-not-exist">7.8. Connection property <code>createDatabaseIfNotExist</code></a></li>
<li><a href="#report-actual-pid">7.9. Report actual process ID (pid)</a></li>
<li><a href="#logging">7.10. Logging facade removed</a></li>
<li><a href="#chacha64">7.11. Support for ChaCha64 wire encryption</a></li>
<li><a href="#package-metadata">7.12. Opt-in feature for package information in DatabaseMetaData</a></li>
<li><a href="#async-fetch">7.13. Asynchronous fetching</a></li>
<li><a href="#blob-performance">7.14. Blob performance improvements</a></li>
<li><a href="#allow-tx-stmts">7.15. Support for executing transaction management statements</a></li>
<li><a href="#wire-buffer-sizes">7.16. Configurable buffer sizes for the wire protocol</a></li>
<li><a href="#event-manager-broken-connection">7.17. Broken connection detection for event manager</a></li>
<li><a href="#native-library-path">7.18. Connection property to specify native library path</a></li>
<li><a href="#client-info">7.19. Rewritten client info properties support</a></li>
<li><a href="#timestamp-localdate-localtime">7.20. <code>TIMESTAMP</code> fields now accept <code>LocalDate</code> and <code>LocalTime</code></a></li>
<li><a href="#no-close-after-last">7.21. <code>ResultSet</code> in auto-commit no longer closed after last row</a></li>
<li><a href="#scroll-rs-update-behavior">7.22. Changes to behaviour of updatable scrollable result sets</a></li>
<li><a href="#custom-socket-factory">7.23. Custom socket factory for pure Java connections</a></li>
<li><a href="#other-fixes-and-changes">7.24. Other fixes and changes</a></li>
</ul>
</li>
<li><a href="#compatibility-changes">8. Compatibility changes</a>
<ul class="sectlevel2">
<li><a href="#support-for-firebird-25-dropped">8.1. Support for Firebird 2.5 dropped</a></li>
<li><a href="#unsupported-protocols-disabled">8.2. Unsupported protocol version disabled by default</a></li>
<li><a href="#support-for-java-before-17-dropped">8.3. Support for Java versions before Java 17 dropped</a></li>
<li><a href="#support-native-embedded">8.4. Native and embedded require extra artifact</a></li>
<li><a href="#support-ooremote-dropped">8.5. Support for jdbc:firebirdsql:oo: (OpenOffice/LibreOffice driver) dropped</a></li>
<li><a href="#removed-prop-timestampuseslocaltmezone">8.6. Removed connection property timestampUsesLocalTimezone</a></li>
<li><a href="#client-info-compat">8.7. Differences in client info property behavior</a></li>
<li><a href="#operation-aware-type-compat">8.8. New Operation.Type value for async fetch</a></li>
<li><a href="#datetime-conversion-changes">8.9. Changes in datetime conversions</a></li>
<li><a href="#compat-allow-tx-stmts">8.10. Execution of <code>COMMIT</code> and <code>ROLLBACK</code> rejected by default</a></li>
<li><a href="#compat-rs-fw-only-holdable">8.11. Forward-only holdable result sets no longer upgraded to scroll-insensitive</a></li>
<li><a href="#compat-read-only">8.12. Read-only behaviour of connections</a></li>
<li><a href="#compat-no-close-after-last">8.13. <code>ResultSet</code> in auto-commit no longer closed after last row</a></li>
<li><a href="#compat-scroll-rs-update-behavior">8.14. Behavioural changes for updatable scrollable <code>ResultSet</code></a></li>
<li><a href="#compat-modular">8.15. Some packages not accessible when Jaybird is on the modulepath</a></li>
<li><a href="#removal-of-classes-packages-and-methods-without-deprecation">8.16. Removal of classes, packages and methods without deprecation</a></li>
<li><a href="#removal-of-deprecated-classes-packages-and-methods">8.17. Removal of deprecated classes, packages and methods</a></li>
<li><a href="#breaking-changes-internal-api">8.18. Breaking changes internal API</a></li>
<li><a href="#breaking-changes-unlikely">8.19. Unlikely breaking changes</a></li>
<li><a href="#breaking-changes-for-jaybird-7">8.20. Breaking changes for Jaybird 7</a></li>
</ul>
</li>
<li><a href="#compatibility-notes">9. Compatibility notes</a>
<ul class="sectlevel2">
<li><a href="#type-2-native-and-embedded-driver">9.1. Type 2 (native) and embedded driver</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="jaybird-6-0-x-changelog"><a class="anchor" href="#jaybird-6-0-x-changelog"></a>1. Jaybird 6.0.x changelog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Changes per Jaybird 6 release.
See also <a href="#whats-new-in-jaybird-6">What&#8217;s new in Jaybird 6</a>.
For known issues, consult <a href="#known-issues">Known issues</a>.</p>
</div>
<div class="sect2">
<h3 id="_jaybird_6_0_2"><a class="anchor" href="#_jaybird_6_0_2"></a>1.1. Jaybird 6.0.2</h3>
<div class="paragraph">
<p>The following was fixed or changed since Jaybird 6.0.1:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Improvement: added <code>authPlugins</code> property on <code>FBManager</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/866">#866</a>)</p>
<div class="paragraph">
<p>As part of this change, the interface <code>FBManagerMBean</code> now extends <code>AttachmentProperties</code>, so that all attachment properties are accessible.</p>
</div>
</li>
<li>
<p>Improvement: increased default and maximum SQL info sizes used for retrieving statement information like columns, parameters and plan information (<a href="https://github.com/FirebirdSQL/jaybird/issues/869">#869</a>)</p>
<div class="paragraph">
<p>The values were changed from the original default and maximum of 32,767 to:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>For pure Java connections:</p>
<div class="ulist">
<ul>
<li>
<p>protocol 12 (Firebird 2.5): 65,535 (default and maximum),</p>
</li>
<li>
<p>protocol 13 (Firebird 3.0) and higher: 512 KiB default, 16 MiB maximum.<br></p>
</li>
</ul>
</div>
</li>
<li>
<p>For native connections:</p>
<div class="ulist">
<ul>
<li>
<p>Firebird 2.5 and higher: 65,535 (default and maximum)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This change improves the performance of preparing statements with a lot of columns and parameters by reducing the number of round-trips needed to retrieve the column and parameter information.
It may also prevent truncation of &#8220;explained plans&#8221; for statements with very complex or extensive plans.</p>
</div>
</li>
<li>
<p>Improvement: backported inline blob support (Firebird 5.0.3 and higher) from Jaybird 7 (<a href="https://github.com/FirebirdSQL/jaybird/issues/870">#870</a>)</p>
<div class="paragraph">
<p>See also <a href="#blob-performance-inline-blob">Inline blob support</a>.</p>
</div>
</li>
<li>
<p>Improvement: The time zone mapping was updated (<a href="https://github.com/FirebirdSQL/jaybird/issues/874">#874</a>)</p>
<div class="ulist">
<ul>
<li>
<p>The following time zone ids were added: <code>64901</code> &#8658; <code>Pacific/Kanton</code>, <code>64900</code> &#8658; <code>Europe/Kyiv</code>, <code>64899</code> &#8658; <code>America/Ciudad_Juarez</code>, <code>64898</code> &#8658; <code>GMT-03:00</code> (should be <code>America/Coyhaique</code>, but that zone name is not yet known in Java)</p>
</li>
<li>
<p>Time zone id <code>64903</code> is now mapped to <code>America/Nuuk</code>;
previously it was mapped to <code>America/Godthab</code> as older versions of Java did not know <code>America/Nuuk</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jaybird_6_0_1"><a class="anchor" href="#_jaybird_6_0_1"></a>1.2. Jaybird 6.0.1</h3>
<div class="paragraph">
<p>The following was fixed or changed since Jaybird 6.0.0:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Improvement: backported deferred blob open optimization from Jaybird 7 (<a href="https://github.com/FirebirdSQL/jaybird/issues/842">#842</a>)</p>
<div class="paragraph">
<p>See also <a href="#blob-performance-defer-open">Deferred blob open</a>.</p>
</div>
</li>
<li>
<p>Fixed: <code>NullPointerException</code> in <code>getGeneratedKeys()</code> with blob columns after (auto)commit (<a href="https://github.com/FirebirdSQL/jaybird/issues/846">#846</a>)</p>
<div class="paragraph">
<p>As part of this fix, there was an incompatible change in the internal GDS-ng API.
Various methods and constructors involved in blob handle creation now throw a <code>SQLException</code> if the database is not attached or the transaction is null or not active.
See also <a href="#breaking-changes-internal-api-6-0-1">Breaking changes internal API for 6.0.1</a>.</p>
</div>
</li>
<li>
<p>Fixed: Fetch response with status=0 (FETCH_OK) and count=0 was logged on DEBUG as an unexpected response (<a href="https://github.com/FirebirdSQL/jaybird/issues/848">#848</a>)</p>
</li>
<li>
<p>Improvement: backported fetching all known blob info items on open from Jaybird 7 (<a href="https://github.com/FirebirdSQL/jaybird/issues/852">#852</a>)</p>
<div class="paragraph">
<p>See also <a href="#blob-performance-info-items">Requesting known info items on open</a>.</p>
</div>
</li>
<li>
<p>Dependency update: updated <code>net.java.dev.jna:jna-jpms</code> from 5.16.0 to 5.17.0 (used by <code>jaybird-native</code>) (<a href="https://github.com/FirebirdSQL/jaybird/issues/854">#854</a>)</p>
</li>
<li>
<p>Dependency update: updated <code>org.bouncycastle:bcprov-jdk18on</code> from 1.79 to 1.80 (used by <code>chacha64-plugin</code>) (<a href="https://github.com/FirebirdSQL/jaybird/issues/856">#856</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jaybird_6_0_0"><a class="anchor" href="#_jaybird_6_0_0"></a>1.3. Jaybird 6.0.0</h3>
<div class="paragraph">
<p>The following was fixed or changed after 6.0.0-beta-1:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Improvement: stacktraces produced by <code>FbExceptionBuilder</code> no longer include <code>StackTraceElements</code> of the builder itself (<a href="https://github.com/FirebirdSQL/jaybird/issues/827">#827</a>)</p>
</li>
<li>
<p>Improvement: support for custom SocketFactory in connection string and data sources (<a href="https://github.com/FirebirdSQL/jaybird/issues/828">#828</a>)</p>
<div class="paragraph">
<p>See also <a href="#custom-socket-factory">Custom socket factory for pure Java connections</a>.</p>
</div>
</li>
<li>
<p>Improvement: added connection property <code>asyncFetch</code> and system property <code>org.firebirdsql.jdbc.defaultAsyncFetch</code> to disable async fetching for pure Java connections (<a href="https://github.com/FirebirdSQL/jaybird/issues/831">#831</a>)</p>
<div class="paragraph">
<p>See also <a href="#async-fetch">Asynchronous fetching</a></p>
</div>
</li>
<li>
<p>Dependency update: updated <code>org.bouncycastle:bcprov-jdk18on</code> from 1.78.1 to 1.79 (used by <code>chacha64-plugin</code>)</p>
</li>
<li>
<p>Dependency update: updated <code>net.java.dev.jna:jna-jpms</code> from 5.15.0 to 5.16.0 (used by <code>jaybird-native</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jaybird-6-0-0-beta-1-changelog"><a class="anchor" href="#jaybird-6-0-0-beta-1-changelog"></a>1.4. Jaybird 6.0.0-beta-1</h3>
<div class="paragraph">
<p>Initial release for evaluation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="known-issues"><a class="anchor" href="#known-issues"></a>2. Known issues</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Using a native connection with a Firebird 3.0 or higher client library to a Firebird 2.5 or older server may be slow to connect.</p>
<div class="paragraph">
<p>Possible workarounds:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Use a native URL with the Firebird INET4 protocol (e.g. for <code>DriverManager</code> <code>jdbc:firebird:native:inet4://&lt;serverName&gt;[:&lt;portNumber&gt;/&lt;databaseName&gt;</code>).</p>
</li>
<li>
<p>Use the IPv4 address instead of the host name in the connection string</p>
</li>
<li>
<p>Use a Firebird 2.5 or earlier <code>fbclient</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This is caused by <a href="https://github.com/FirebirdSQL/firebird/issues/4971">firebird#4971</a></p>
</div>
</li>
<li>
<p>In Java 24, the mapping of some named <code>WITH TIME ZONE</code> values changed as Java&#8217;s mapping of short IDs changed.
This should only affect cases where you explicitly obtain <code>ZonedDateTime</code> or <code>ZonedTime</code> instances with these named zones.</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>EST (ID 65136) &#8594; America/Panama;
maps to -05:00 in older Java versions</p>
</li>
<li>
<p>HST (ID 65027) &#8594; Pacific/Honolulu;
maps to -10:00 in older Java versions</p>
</li>
<li>
<p>MST (ID 65002) &#8594; America/Phoenix;
maps to -07:00 in older Java versions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>This is informational only, and not something that we can fix or change in a later Jaybird release.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-notes"><a class="anchor" href="#general-notes"></a>3. General Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird is a JDBC driver suite to connect to Firebird database servers from Java and other Java Virtual Machine (JVM) languages.</p>
</div>
<div class="paragraph">
<p>This driver does not work on Android, because it uses classes and features not available in Android.</p>
</div>
<div class="sect2">
<h3 id="about-this-version"><a class="anchor" href="#about-this-version"></a>3.1. About this version</h3>
<div class="paragraph">
<p>Jaybird 6 is an incremental change from Jaybird 5.</p>
</div>
<div class="paragraph">
<p>The major changes and new features in Jaybird 6 are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Minimum supported Java version is Java 17.<br>
See <a href="#java-support">Java support</a> for more information.</p>
</li>
<li>
<p>Minimum supported Firebird version is Firebird 3.0.<br>
See <a href="#firebird-support">Firebird support</a> for more information.</p>
</li>
<li>
<p>The pure Java protocol&#8201;&#8212;&#8201;by default&#8201;&#8212;&#8201;no longer connects to Firebird 2.5 and older, as those versions are not supported.<br>
See <a href="#unsupported-protocol">Pure Java will not connect to unsupported Firebird versions by default</a> for more information.</p>
</li>
<li>
<p>The native and embedded protocols have been moved to a separate artifact, <code>jaybird-native</code>.<br>
See <a href="#native-plugin">NATIVE and EMBEDDED support moved to a separate artifact</a> for more information.</p>
</li>
<li>
<p><a href="#ooremote-removed">OOREMOTE (OpenOffice/LibreOffice protocol) removed</a></p>
</li>
<li>
<p><a href="#modules">Modularization of Jaybird</a></p>
</li>
<li>
<p><a href="#create-database-if-not-exist">Connection property <code>createDatabaseIfNotExist</code></a></p>
</li>
<li>
<p><a href="#report-actual-pid">Report actual process ID (pid)</a></p>
</li>
<li>
<p><a href="#logging">Logging facade removed</a></p>
</li>
<li>
<p><a href="#chacha64">Support for ChaCha64 wire encryption</a></p>
</li>
<li>
<p><a href="#package-metadata">Opt-in feature for package information in DatabaseMetaData</a></p>
</li>
<li>
<p><a href="#async-fetch">Asynchronous fetching</a></p>
</li>
<li>
<p><a href="#blob-performance">Blob performance improvements</a></p>
</li>
<li>
<p><a href="#allow-tx-stmts">Support for executing transaction management statements</a></p>
</li>
<li>
<p><a href="#wire-buffer-sizes">Configurable buffer sizes for the wire protocol</a></p>
</li>
<li>
<p><a href="#event-manager-broken-connection">Broken connection detection for event manager</a></p>
</li>
<li>
<p><a href="#native-library-path">Connection property to specify native library path</a></p>
</li>
<li>
<p><a href="#client-info">Rewritten client info properties support</a></p>
</li>
<li>
<p><a href="#timestamp-localdate-localtime"><code>TIMESTAMP</code> fields now accept <code>LocalDate</code> and <code>LocalTime</code></a></p>
</li>
<li>
<p><a href="#no-close-after-last"><code>ResultSet</code> in auto-commit no longer closed after last row</a></p>
</li>
<li>
<p><a href="#scroll-rs-update-behavior">Changes to behaviour of updatable scrollable result sets</a></p>
</li>
<li>
<p><a href="#custom-socket-factory">Custom socket factory for pure Java connections</a></p>
</li>
<li>
<p>&#8230;&#8203; and <a href="#other-fixes-and-changes">other fixes and changes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upgrading from Jaybird 5 should be straightforward, but please make sure to read <a href="#compatibility-changes">Compatibility changes</a> before using Jaybird 6.
If you&#8217;re using Jaybird with the native or embedded connections, you will need to make some additional changes.
See also <a href="#upgrading-from-jaybird-5-to-jaybird-6">Upgrading from Jaybird 5 to Jaybird 6</a>.</p>
</div>
<div class="paragraph">
<p>Bug reports about undocumented changes in behavior are appreciated.
Feedback can be sent to the <a href="https://groups.google.com/g/firebird-java">Firebird-java mailing list</a> or reported on the issue tracker <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-firebird-versions"><a class="anchor" href="#supported-firebird-versions"></a>3.2. Supported Firebird versions</h3>
<div class="paragraph">
<p>Jaybird 6.0.2 was tested against Firebird 3.0.12, Firebird 4.0.5, Firebird 5.0.2, and recent snapshots of Firebird 5.0.3 and Firebird 6.0, but should also support other Firebird versions from 3.0 and up.
Firebird 2.5 and older are not supported.</p>
</div>
<div class="paragraph">
<p>Firebird 6.0 is currently also not considered supported (see also <a href="#firebird-support">Firebird support</a> in <a href="#whats-new-in-jaybird-6">What&#8217;s new in Jaybird 6</a>).</p>
</div>
<div class="paragraph">
<p>Jaybird 6 will&#8201;&#8212;&#8201;by default&#8201;&#8212;&#8201;not connect to Firebird 2.5 or older.
See also <a href="#unsupported-protocol">Pure Java will not connect to unsupported Firebird versions by default</a>.</p>
</div>
<div class="paragraph">
<p>This driver does not support InterBase.</p>
</div>
</div>
<div class="sect2">
<h3 id="supported-java-versions"><a class="anchor" href="#supported-java-versions"></a>3.3. Supported Java versions</h3>
<div class="paragraph">
<p>Jaybird 6 supports Java 17 and higher (JDBC 4.3).
Support for earlier Java versions has been dropped.</p>
</div>
<div class="paragraph">
<p>Given the limited support period for Java 9 and higher versions, we limit support to Java 17, the most recent LTS version after Java 17, and the latest Java release.
Currently, that means we support Java 17, Java 21, and Java 24.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird 5 will serve as a &#8220;long-term support&#8221; version for Java 8 and 11, with maintenance releases at least until the release of Jaybird 7.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jaybird 6 provides libraries compiled for Java 17.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 is modularized.
The available modules are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jaybird</code></dt>
<dd>
<p>main Jaybird driver (<code>jaybird-6.0.2.jar</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jaybird.chacha64</code></dt>
<dd>
<p>ChaCha64 wire encryption implementation (<code>chacha64-plugin-6.0.2.jar</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jna</code></dt>
<dd>
<p>native and embedded protocol implementation using JNA (<code>jaybird-native-6.0.2.jar</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>See also <a href="#java-support">Java support</a> in <a href="#whats-new-in-jaybird-6">What&#8217;s new in Jaybird 6</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="specification-support"><a class="anchor" href="#specification-support"></a>3.4. Specification support</h3>
<div class="paragraph">
<p>Jaybird supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a security manager is available, the driver still performs <code>SQLPermission</code> checks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All JDBC 4.3 methods for features supported by Firebird.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA 1.0.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implementation of <code>javax.transaction.xa.XAResource</code> interface via <code>XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support"><a class="anchor" href="#support"></a>4. Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need support with Jaybird, join the <a href="https://groups.google.com/g/firebird-java">Firebird-Java Google Group</a> and mailing list.
You can subscribe by sending an email to <a href="mailto:firebird-java+subscribe@googlegroups.com">firebird-java+subscribe@googlegroups.com</a>.</p>
</div>
<div class="paragraph">
<p>Looking for professional support of Jaybird?
Jaybird is now part of the <a href="https://tidelift.com/subscription/pkg/maven-org-firebirdsql-jdbc-jaybird?utm_source=maven-org-firebirdsql-jdbc-jaybird&amp;utm_medium=referral&amp;utm_campaign=docs">Tidelift subscription</a>.</p>
</div>
<div class="paragraph">
<p>For a more complete list, see the next section.</p>
</div>
<div class="sect2">
<h3 id="where-to-get-help"><a class="anchor" href="#where-to-get-help"></a>4.1. Where to get help</h3>
<div class="ulist">
<ul>
<li>
<p>On <a href="https://stackoverflow.com/">Stack Overflow</a>, please tag your questions with <em>jaybird</em> and <em>firebird</em></p>
</li>
<li>
<p>The <a href="https://groups.google.com/g/firebird-java">Firebird-Java group</a> and corresponding mailing list <a href="mailto:firebird-java@googlegroups.com">firebird-java@googlegroups.com</a></p>
<div class="paragraph">
<p>You can subscribe to the mailing list by sending an email to <a href="mailto:firebird-java+subscribe@googlegroups.com">firebird-java+subscribe@googlegroups.com</a></p>
</div>
</li>
<li>
<p>Looking for professional support of Jaybird?
Jaybird is now part of the <a href="https://tidelift.com/subscription/pkg/maven-org-firebirdsql-jdbc-jaybird?utm_source=maven-org-firebirdsql-jdbc-jaybird&amp;utm_medium=referral&amp;utm_campaign=docs">Tidelift subscription</a>.</p>
</li>
<li>
<p>The <a href="https://firebirdsql.org">Firebird project home page</a></p>
</li>
<li>
<p><a href="https://groups.google.com/g/firebird-support">Firebird-support</a> and other <a href="https://firebirdsql.org/en/mailing-lists/">Firebird mailing lists</a> for questions not directly related to Jaybird and Java.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="contributing"><a class="anchor" href="#contributing"></a>4.2. Contributing</h3>
<div class="paragraph">
<p>There are several ways you can contribute to Jaybird or Firebird in general:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Participate on the <a href="https://firebirdsql.org/en/mailing-lists/">mailing lists</a></p>
</li>
<li>
<p>Report bugs or submit patches on the tracker (see <a href="#reporting-bugs">Reporting bugs</a>)</p>
</li>
<li>
<p>Create pull requests on GitHub (<a href="https://github.com/FirebirdSQL/jaybird" class="bare">https://github.com/FirebirdSQL/jaybird</a>)</p>
</li>
<li>
<p>Become a developer (for Jaybird contact us on <a href="https://groups.google.com/g/firebird-java">firebird-java</a>, for Firebird in general, use the <a href="https://groups.google.com/g/firebird-devel">Firebird-devel</a> mailing list)</p>
</li>
<li>
<p>Donate to the Firebird Foundation (see <a href="https://firebirdsql.org/en/donate/" class="bare">https://firebirdsql.org/en/donate/</a>)</p>
</li>
<li>
<p>Become a paying Associate, Partner or sponsor of the Firebird Foundation (see <a href="https://firebirdsql.org/en/firebird-foundation/" class="bare">https://firebirdsql.org/en/firebird-foundation/</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="reporting-bugs"><a class="anchor" href="#reporting-bugs"></a>4.3. Reporting bugs</h3>
<div class="paragraph">
<p>The developers follow the <a href="https://groups.google.com/g/firebird-java">firebird-java Google Group</a>.
Join the list and post information about suspected bugs.
List members may be able to help out to determine if it is an actual bug, provide a workaround and get you going again, whereas bug fixes might take a while.</p>
</div>
<div class="paragraph">
<p>You can also report bugs in the Jaybird bug tracker, <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare">https://github.com/FirebirdSQL/jaybird/issues</a>.</p>
</div>
<div class="paragraph">
<p>When reporting bugs, please provide a minimal, but complete reproduction, including databases and sourcecode to reproduce the problem.
Patches to fix bugs are also appreciated.
Make sure the patch is against a recent master version of the code.
You can also fork the <a href="https://github.com/FirebirdSQL/jaybird">jaybird repository</a> and create pull requests.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-jaybird-6"><a class="anchor" href="#getting-jaybird-6"></a>5. Getting Jaybird 6</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="jaybird-version_wo_target"><a class="anchor" href="#jaybird-version_wo_target"></a>5.1. Jaybird 6.0.2</h3>
<div class="sect3">
<h4 id="maven"><a class="anchor" href="#maven"></a>5.1.1. Maven</h4>
<div class="paragraph">
<p>Jaybird 6.0.2 is available on Maven Central.</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
groupId
</td>
<td class="hdlist2">
<p><code>org.firebirdsql.jdbc</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
artifactId
</td>
<td class="hdlist2">
<p><code>jaybird</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
version
</td>
<td class="hdlist2">
<p><code>6.0.2</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
    &lt;version&gt;6.0.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native or embedded), you need to explicitly add <code>jaybird-native</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;jaybird-native&lt;/artifactId&gt;
    &lt;version&gt;6.0.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Windows and Linux, you can add the <code>org.firebirdsql.jdbc:fbclient</code> dependency on your classpath to provide the native libraries for the <code>native</code> protocol.
Be aware that this dependency does not support <code>embedded</code>.</p>
</div>
<div class="paragraph">
<p>See also <a href="#type-2-native-and-embedded-driver">Type 2 (native) and embedded driver</a>.</p>
</div>
<div class="paragraph">
<p>To enable the &#8220;ChaCha64&#8221; wire encryption support for pure Java connections, also add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;chacha64-plugin&lt;/artifactId&gt;
    &lt;version&gt;6.0.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gradle"><a class="anchor" href="#gradle"></a>5.1.2. Gradle</h4>
<div class="paragraph">
<p>See also <a href="#maven">Maven</a>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="title">Main Jaybird artifact</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:jaybird:6.0.2'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Jaybird native artifact (native and embedded protocol)</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:jaybird-native:6.0.2'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ChaCha64 wire encryption plugin</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:chacha64-plugin:6.0.2'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="download"><a class="anchor" href="#download"></a>5.1.3. Download</h4>
<div class="paragraph">
<p>You can download the release of Jaybird from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>At minimum, Jaybird 6 requires <code>jaybird-6.0.2.jar</code>.</p>
</div>
<div class="paragraph">
<p>For native or embedded support, also add <code>jaybird-native-6.0.2.jar</code> and <code>jna-jpms-5.17.0.jar</code> on your classpath or modulepath.
See also <a href="#type-2-native-and-embedded-driver">Type 2 (native) and embedded driver</a>.</p>
</div>
<div class="paragraph">
<p>For &#8220;ChaCha64&#8221; wire-encryption support with pure Java connections, also add <code>chacha64-plugin-6.0.2.jar</code>, and <code>bcprov-jdk18on-1.80.jar</code> from the <code>lib</code> directory of the distribution zip.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading-from-jaybird-5-to-jaybird-6"><a class="anchor" href="#upgrading-from-jaybird-5-to-jaybird-6"></a>6. Upgrading from Jaybird 5 to Jaybird 6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please make sure to read <a href="#compatibility-changes">Compatibility changes</a> before upgrading to Jaybird 6.</p>
</div>
<div class="sect2">
<h3 id="maven-2"><a class="anchor" href="#maven-2"></a>6.1. Maven</h3>
<div class="paragraph">
<p>Change the version of the dependency to <code>6.0.2</code>.
If you&#8217;re using the artifact id <code>jaybird-jdkXX</code>, change it to <code>jaybird</code>.</p>
</div>
<div class="paragraph">
<p>When your Jaybird dependency defines the exclusion for <code>javax.resource:connector-api</code> (see example below), you can remove it as Jaybird no longer has a dependency on <code>connector-api</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;exclusions&gt;
    &lt;exclusion&gt;
        &lt;groupId&gt;javax.resource&lt;/groupId&gt;
        &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
&lt;/exclusions&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more detailed instructions, see also the information on Maven in <a href="#getting-jaybird-6">Getting Jaybird 6</a>.</p>
</div>
<div class="paragraph">
<p>If you use native or embedded, you now need to explicitly add <code>jaybird-native</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;jaybird-native&lt;/artifactId&gt;
    &lt;version&gt;6.0.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use native or embedded, make sure to update your JNA dependency to version <code>5.17.0</code> and artifact id <code>jna-jpms</code>, or remove it altogether as the dependencies will now be pulled in through the <code>jaybird-native</code> artifact.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;
    &lt;artifactId&gt;jna-jpms&lt;/artifactId&gt;
    &lt;version&gt;5.17.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Previous Jaybird versions used <code>artifactId</code> <code>jna</code> instead of <code>jna-jpms</code>.
Although both artifacts are nearly identical, the <code>jna-jpms</code> artifact provides a <code>module-info.class</code>, while the <code>jna</code> artifact does not.
If you want to use Jaybird as a module, and use <code>jaybird-native</code>, make sure to use the <code>jna-jpms</code> artifact.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="manual-install"><a class="anchor" href="#manual-install"></a>6.2. Manual install</h3>
<div class="paragraph">
<p>If you manage your dependencies manually, you need to do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace the Jaybird 5 library with the Jaybird 6 version</p>
<div class="ulist">
<ul>
<li>
<p><code>jaybird-5.0.x.&lt;java&gt;.jar</code> with <code>jaybird-6.0.2.jar</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If you use the NATIVE or EMBEDDED protocols, add the following JARs to the classpath or modulepath</p>
<div class="ulist">
<ul>
<li>
<p><code>jaybird-native-6.0.2.jar</code></p>
</li>
<li>
<p><code>jna-jpms-5.17.0.jar</code> from the <code>lib</code> directory of the distribution zip</p>
<div class="paragraph">
<p>If you have an older version of JNA or a <code>jna-5.17.0</code> instead of <code>jna-jpms-5.17.0</code>, make sure to replace it with <code>jna-jpms</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>To enable &#8220;ChaCha64&#8221; wire encryption support add the following JARs to the classpath or modulepath</p>
<div class="ulist">
<ul>
<li>
<p><code>chacha64-plugin-6.0.2.jar</code></p>
</li>
<li>
<p><code>bcprov-jdk18on-1.80.jar</code> from the <code>lib</code> directory of the distribution zip</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="gotchas"><a class="anchor" href="#gotchas"></a>6.3. Gotcha&#8217;s</h3>
<div class="paragraph">
<p>If you find a problem while upgrading, or other bugs, please report it on <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a> (see also <a href="#reporting-bugs">Reporting bugs</a>).</p>
</div>
<div class="paragraph">
<p>For known issues, consult <a href="#known-issues">Known issues</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whats-new-in-jaybird-6"><a class="anchor" href="#whats-new-in-jaybird-6"></a>7. What&#8217;s new in Jaybird 6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a full list of changes, see milestones <a href="https://github.com/FirebirdSQL/jaybird/milestone/1?closed=1">&#8220;v6-initial&#8221;</a> and <a href="https://github.com/FirebirdSQL/jaybird/milestone/8?closed=1">&#8220;v6.0.0&#8221;</a>.</p>
</div>
<div class="sect2">
<h3 id="jaybird-version-numbering"><a class="anchor" href="#jaybird-version-numbering"></a>7.1. Changes in version numbering</h3>
<div class="paragraph">
<p>The minimum supported Java version of Jaybird 6 is Java 17.
Our expectation is that Java version specific artifacts are no longer needed.
As a consequence, the Java version has been dropped from the version number.
The full version and naming convention is documented in <a href="https://github.com/FirebirdSQL/jaybird/blob/v5.0.0-beta-1/devdoc/jdp/jdp-2023-01-version-number-and-naming-scheme.md" target="_blank" rel="noopener">jdp-2023-01: Version Number and Naming Scheme</a></p>
</div>
<div class="paragraph">
<p>As a result of these new naming conventions, the following has changed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven version: <code>6.0.0</code> (was <code>5.0.0.java8</code>)</p>
</li>
<li>
<p>Distribution zip: <code>jaybird-6.0.0.zip</code> (was <code>jaybird-5.0.0.java8.zip</code>)</p>
</li>
<li>
<p>Jaybird: <code>jaybird-6.0.0.jar</code> (was <code>jaybird-5.0.0.java8.jar</code>)</p>
</li>
<li>
<p>Jaybird sources: <code>jaybird-6.0.0-sources.jar</code> (was <code>jaybird-5.0.0.java8-sources.jar</code>)</p>
</li>
<li>
<p>Jaybird javadoc: <code>jaybird-6.0.0-javadoc.jar</code> (was <code>jaybird-5.0.0.java8-javadoc.jar</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, the client name reported to Firebird is now <code>Jaybird jaybird-6.0.0</code> (was: <code>Jaybird jaybird-5.0.0.java8</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="java-support"><a class="anchor" href="#java-support"></a>7.2. Java support</h3>
<div class="sect3">
<h4 id="java-before-17"><a class="anchor" href="#java-before-17"></a>7.2.1. Java versions before 17 no longer supported</h4>
<div class="paragraph">
<p>Support of Java versions before Java 17 was dropped.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/v5.0.0-beta-1/devdoc/jdp/jdp-2022-03-java-17-minimum-version.md" target="_blank" rel="noopener">jdp-2022-03: Java 17 minimum version</a></p>
</div>
</div>
<div class="sect3">
<h4 id="java-17-and-higher"><a class="anchor" href="#java-17-and-higher"></a>7.2.2. Java 17 and higher</h4>
<div class="paragraph">
<p>Jaybird 6 supports Java 17 and higher (JDBC 4.3).
Most of the JDBC 4.3 features have been implemented (in as far as they are supported by Firebird).</p>
</div>
<div class="paragraph">
<p>Given the limited support period for Java 17 and higher versions, not all Java releases are formally supported, see <a href="#supported-java-versions">Supported Java versions</a> for details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="firebird-support"><a class="anchor" href="#firebird-support"></a>7.3. Firebird support</h3>
<div class="paragraph">
<p>Support for Firebird 2.5 has been dropped.
See also <a href="#support-for-firebird-25-dropped">Support for Firebird 2.5 dropped</a>.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 supports Firebird 3.0, Firebird 4.0, and Firebird 5.0.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">No promises on Firebird 6.0 support</div>
<div class="paragraph">
<p>Firebird 6.0 is still in its early stages of development, and is expected to include changes&#8201;&#8212;&#8201;like schema support&#8201;&#8212;&#8201;that may impact Jaybird.</p>
</div>
<div class="paragraph">
<p>As a result&#8201;&#8212;&#8201;at this time&#8201;&#8212;&#8201;we make no promises on the support for Firebird 6.0 by Jaybird 6.
We may delay support for Firebird 6.0 until Jaybird 7, or we may improve support during maintenance releases of Jaybird 6.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jaybird 6 will&#8201;&#8212;&#8201;by default&#8201;&#8212;&#8201;not connect to unsupported versions (that is, Firebird 2.5 or older) using the pure Java protocol.
See also <a href="#unsupported-protocol">Pure Java will not connect to unsupported Firebird versions by default</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="unsupported-protocol"><a class="anchor" href="#unsupported-protocol"></a>7.4. Pure Java will not connect to unsupported Firebird versions by default</h3>
<div class="paragraph">
<p>The pure Java protocol will by default no longer try the wire protocol versions of unsupported Firebird versions.
This means that&#8201;&#8212;&#8201;by default&#8201;&#8212;&#8201;only protocol version 13 (Firebird 3.0)&#8201;&#8212;&#8201;19 (Firebird 5.0.3 and higher) are tried.
As a result, attempts to connect to Firebird 2.5 or earlier will result in error &#8220;<em>connection rejected by remote interface</em>&#8221; (<code>335544421</code> or <code>isc_connect_reject</code>).</p>
</div>
<div class="paragraph">
<p>The connection property <code>enableProtocol</code> can enable unsupported protocols, assuming a suitable protocol implementation is available on the classpath.</p>
</div>
<div class="paragraph">
<p>This connection property can have the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A comma-separated list of additional protocol versions to try (e.g. <code>"11,12"</code>).
The listed versions are tried in addition to the supported protocol versions.
Non-integer values or unknown protocol versions are silently ignored.</p>
<div class="paragraph">
<p>It is possible to use the &#8220;masked&#8221; protocol version (e.g. <code>"32780"</code> for protocol version 12).
However, we recommend using the unmasked version (e.g. <code>"12"</code> for protocol version 12).</p>
</div>
</li>
<li>
<p><code>"*"</code>&#8201;&#8212;&#8201;enable all available protocol versions</p>
</li>
<li>
<p><code>null</code> or empty string (<code>""</code>)&#8201;&#8212;&#8201;default behaviour, only use supported protocols</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A different default value of <code>enableProtocol</code> can be set using the system property <code>org.firebirdsql.jdbc.defaultEnableProtocol</code>.
This system property is checked each time a connection configuration is created, so it can be changed at runtime.
If you use a Jaybird <code>DataSource</code> implementation, it uses the value at the time the <code>DataSource</code> is created;
if you use <code>DriverManager</code>&#8201;&#8212;&#8201;this can include third-party data sources, it uses the value at the time the connection is created.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Given these protocol versions and their Firebird versions are not supported, there is no guarantee that the driver will function correctly when an unsupported protocol is enabled.
Especially things like database metadata could use features that are not supported by older Firebird versions.
We recommend upgrading your Firebird version, or downgrading to a Jaybird version which still supports your Firebird version.</p>
</div>
<div class="paragraph">
<p>For maximum compatibility, it is recommended to either use <code>"*"</code>, or to make sure to include the maximum protocol version of your Firebird version.</p>
</div>
<div class="paragraph">
<p>Unsupported protocol versions may be removed in future major releases of Jaybird.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Firebird versions and protocol versions</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Firebird version</th>
<th class="tableblock halign-left valign-top">Maximum protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0&#8201;&#8212;&#8201;2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup><sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="native-plugin"><a class="anchor" href="#native-plugin"></a>7.5. NATIVE and EMBEDDED support moved to a separate artifact</h3>
<div class="paragraph">
<p>The NATIVE (JDBC URL prefix <code>jdbc:firebird[sql]:native:</code>) and EMBEDDED (JDBC URL prefix <code>jdbc:firebird[sql]:embedded:</code>) protocol implementations have been moved to a separate artifact, <code>org.firebirdsql.jdbc:jaybird-native</code>.</p>
</div>
<div class="paragraph">
<p>If you use native or embedded connections using Jaybird, you will need to explicitly add the appropriate Maven dependency (or <code>jaybird-native-6.0.2.jar</code> and <code>jna-jpms-5.17.0.jar</code>) to your classpath.</p>
</div>
<div class="paragraph">
<p>See also <a href="#getting-jaybird-6">Getting Jaybird 6</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ooremote-removed"><a class="anchor" href="#ooremote-removed"></a>7.6. OOREMOTE (OpenOffice/LibreOffice protocol) removed</h3>
<div class="paragraph">
<p>The OOREMOTE protocol (JDBC URL prefix <code>jdbc:firebird[sql]:oo:</code>) has been removed in Jaybird 6.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/tree/master/devdoc/jdp/jdp-2022-04-deprecate-ooremote.md" target="_blank" rel="noopener">jdp-2022-04: Deprecate OOREMOTE (OpenOffice/LibreOffice driver) for removal</a>.</p>
</div>
<div class="paragraph">
<p>The recommended replacement is to use LibreOffice and the builtin &#8220;Firebird External&#8221; connection option in LibreOffice Base, instead of the &#8220;JDBC&#8221; option with Jaybird on the classpath of LibreOffice.</p>
</div>
</div>
<div class="sect2">
<h3 id="modules"><a class="anchor" href="#modules"></a>7.7. Modularization of Jaybird</h3>
<div class="paragraph">
<p>Jaybird now uses real Java modules.</p>
</div>
<div class="paragraph">
<p>The available modules are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jaybird</code></dt>
<dd>
<p>main Jaybird driver (<code>jaybird-6.0.2.jar</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jaybird.chacha64</code></dt>
<dd>
<p>ChaCha64 wire encryption implementation (<code>chacha64-plugin-6.0.2.jar</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jna</code></dt>
<dd>
<p>native and embedded protocol implementation using JNA (<code>jaybird-native-6.0.2.jar</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>We&#8217;ve tried to be liberal with exporting packages from Jaybird, but we have decided not to export some packages because we think they shouldn&#8217;t normally be accessed by users of Jaybird.
If you run into problems with packages not being exported, please report this on <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java</a> or on <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a>.
Please include an explanation why you need to access a specific package.
As a workaround, you can also add exports yourself with the <code>--add-exports</code> commandline option of <code>java</code> and <code>javac</code> and the <code>Add-Exports</code> manifest entry of your application (similar options exist for <em>opens</em>).</p>
</div>
<div class="paragraph">
<p>When the Jaybird JAR files are on the classpath, they should behave as before.
For modular applications, once added to the modulepath instead of the classpath, they will behave in a more restricted fashion.</p>
</div>
<div class="paragraph">
<p>If you use Jaybird only as a JDBC driver (through <code>java.sql.DriverManager</code>), having the driver on the modulepath and having <code>requires java.sql</code> in the <code>module-info.java</code> of your application should be sufficient.
If your code uses classes and other types from Jaybird, you will also need to add <code>requires org.firebirdsql.jaybird</code>.</p>
</div>
<div class="paragraph">
<p>The ChaCha64 plugin, <code>org.firebirdsql.jaybird.chacha64</code>, will just need to be present on the modulepath to be loaded.</p>
</div>
<div class="paragraph">
<p>The same goes for the native protocol module, <code>org.firebirdsql.jna</code>, but we recommend you only add it to the modulepath if you actually need native or embedded access.
You also need to replace any <code>jna-&lt;version&gt;.jar</code> with <code>jna-jpms-5.17.0.jar</code> (the modular variant of JNA).</p>
</div>
<div class="paragraph">
<p>If you use <code>org.firebirdsql.jna</code> to implement a Firebird embedded provider, you&#8217;ll need to add <code>requires org.firebirdsql.jna</code> and an appropriate <code>provides org.firebirdsql.jna.embedded.spi.FirebirdEmbeddedProvider with &lt;classname&gt;</code> in your <code>module-info.java</code>.
For compatibility with use on the classpath, it is recommended to also provide the <code>META-INF/services/org.firebirdsql.jna.embedded.spi.FirebirdEmbeddedProvider</code> file.</p>
</div>
<div class="paragraph">
<p>For more information, see also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-13-modularization-of-jaybird.adoc" target="_blank" rel="noopener">jdp-2023-13: Modularization of Jaybird</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-database-if-not-exist"><a class="anchor" href="#create-database-if-not-exist"></a>7.8. Connection property <code>createDatabaseIfNotExist</code></h3>
<div class="paragraph">
<p>The Boolean connection property <code>createDatabaseIfNotExist</code> instructs Jaybird to attempt to create the database if it does not exist yet.
This property can be used in the JDBC URL, in the <code>Properties</code> object passed to <code>DriverManager</code>, and can be set on data sources.</p>
</div>
<div class="paragraph">
<p>Although Jaybird already allowed you to create databases using <code>org.firebirdsql.management.FBManager</code>, this is not always accessible, for example in tools or libraries that only expose or use the JDBC API.
This new property provides an alternative way to create databases.</p>
</div>
<div class="paragraph">
<p>Jaybird allows you to set or override connection properties specifically for creating the database by suffixing the property name with <code>@create</code> (case-sensitive).
This can be used to set configuration properties that are only relevant for creating the database, or&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;to use a different user or role for creating the database than used for normal connections.</p>
</div>
<div class="paragraph">
<p>As an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String jdbcUrl = "jdbc:firebird://localhost/exampledb" +
    "?createDatabaseIfNotExist=true&amp;" +
    "user@create=sysdba&amp;password@create=masterkey";
try (Connection connection = DriverManager.getConnection(
    jdbcUrl, "normaluser", "password")) {
  // ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>If the database already exists, the connection will be made with user <code>normaluser</code>, but if the database does not exist, the database <em>and</em> the connection will be created with user <code>sysdba</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The errors Firebird returns do not make it possible to determine definitively if the database does not exist, or if there is another reason that the connection failed.
Jaybird applies some simple rules to exclude some classes of errors, and not attempt to create a database in those cases.</p>
</div>
<div class="paragraph">
<p>If you find cases where you think Jaybird should not&#8201;&#8212;&#8201;or on the contrary, should&#8201;&#8212;&#8201;attempt to create a database, please report them on <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-02-create-database-through-jdbc-url.adoc" target="_blank" rel="noopener">jdp-2024-02: Create database through JDBC URL</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="report-actual-pid"><a class="anchor" href="#report-actual-pid"></a>7.9. Report actual process ID (pid)</h3>
<div class="paragraph">
<p>The pure Java implementation will now report the actual process ID (pid) in connection property <code>isc_dpb_process_id</code>.
The native implementation already did this.</p>
</div>
<div class="paragraph">
<p>For pure Java connections, the reported process ID can be overridden using the connection property <code>processId</code> or the system property <code>org.firebirdsql.jdbc.pid</code>.
This feature is retained for backwards compatibility.</p>
</div>
<div class="paragraph">
<p>When a <code>SecurityManager</code> is installed, the entire call-chain needs to have the <code>RuntimePermission("manageProcess")</code> to obtain the process ID in pure Java connections.
If this permission check fails, Jaybird will silently ignore it and not set the <code>isc_dpb_process_id</code> based on the actual process ID.</p>
</div>
</div>
<div class="sect2">
<h3 id="logging"><a class="anchor" href="#logging"></a>7.10. Logging facade removed</h3>
<div class="paragraph">
<p>The logging facade from package <code>org.firebirdsql.logging</code> has been removed, and is replaced by the Java Platform Logging API (<a href="https://openjdk.org/jeps/264" target="_blank" rel="noopener">JEP 264</a>).</p>
</div>
<div class="paragraph">
<p>The Java Platform Logging API by default logs to <code>java.util.logging</code>, but it is possible to plug in different logging platforms.
For example, Log4j provides the <code>log4j-jpl</code> dependency which will replace the default binding to <code>java.util.logging</code> with one to Log4j.</p>
</div>
<div class="paragraph">
<p>With this change, Jaybird no longer provides an option to specify a custom logger implementation, so the system property <code>org.firebirdsql.jdbc.loggerImplementation</code> is no longer supported.
If you need a custom logger, you will need to implement <code>java.lang.System.Logger</code> and <code>java.lang.System.LogFinder</code> and provide the necessary service loader definition (see the Java documentation for details).</p>
</div>
<div class="paragraph">
<p>The system properties <code>org.firebirdsql.jdbc.forceConsoleLogger</code> and <code>org.firebirdsql.jdbc.disableLogging</code> are also no longer supported.
Equivalent behaviour is achieved by configuring the active logging library.</p>
</div>
</div>
<div class="sect2">
<h3 id="chacha64"><a class="anchor" href="#chacha64"></a>7.11. Support for ChaCha64 wire encryption</h3>
<div class="paragraph">
<p>Support for the &#8220;ChaCha64&#8221; wire encryption&#8201;&#8212;&#8201;introduced in Firebird 4.0.1&#8201;&#8212;&#8201;was added for the <code>PURE_JAVA</code> protocol.
Given this requires a dependency on the Bouncy Castle provider (<code>bcprov-jdk18on</code>), the plugin is made available as a separate artifact: <code>org.firebirdsql.jdbc:chacha64-plugin</code> on Maven or <code>chacha64-plugin-6.0.2.jar</code> in the distribution zip.</p>
</div>
<div class="paragraph">
<p>When deploying manually, please make sure to also include the <code>bcprov-jdk18on-1.80.jar</code> from the <code>lib</code> directory of the distribution zip on the classpath.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Limitations of ChaCha lead to introduction of ChaCha64</div>
<div class="paragraph">
<p>The &#8220;ChaCha&#8221; wire encryption introduced in Firebird 4.0 and Jaybird 5 uses a 96-bit nonce and 32-bit counter.
This 32-bit counter limits the amount of data you can transfer to a maximum of 256 GiB.
As the Firebird wire protocol doesn&#8217;t support &#8220;re-keying&#8221; the encryption plugin, this means the connection breaks if 256GiB has been sent or received.
This breaking is done to prevent key re-use, which could make the data stream vulnerable to certain types of cryptological analysis.</p>
</div>
<div class="paragraph">
<p>To address this, Firebird 4.0.1 added the &#8220;ChaCha64&#8221; wire encryption, which uses a 64-bit nonce and 64-bit counter.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>As part of this change, Jaybird is now capable of loading <code>EncryptionPluginSpi</code> instances using the service loader mechanism.
The API of <code>EncryptionPluginSpi</code> and <code>EncryptionPlugin</code> and other classes and interfaces in package <code>org.firebirdsql.gds.ng.wire.crypt</code> should still be considered unstable and internal API, so use it at your own risk to implement your own plugins.
If you want to use it for implementing your own encryption plugins, let us know on <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java</a>.
We can then look at stabilizing the API and considering it formally a public API.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-06-chacha64-support.adoc" target="_blank" rel="noopener">jdp-2023-06: ChaCha64 Support</a></p>
</div>
</div>
<div class="sect2">
<h3 id="package-metadata"><a class="anchor" href="#package-metadata"></a>7.12. Opt-in feature for package information in DatabaseMetaData</h3>
<div class="paragraph">
<p>Firebird 3.0 added packages, which can contain stored procedures and functions.
The JDBC API does not provide a standard way of accessing information about packages, or the routines defined in packages.
Instead of adding additional Jaybird-specific metadata methods, we&#8217;ve added an &#8220;opt-in&#8221; feature that provides access through normal metadata methods, using the &#8220;catalog&#8221; to report packages.</p>
</div>
<div class="paragraph">
<p>This feature can be enabled by setting the connection property <code>useCatalogAsPackage</code> to <code>true</code>.
When this connection property is enabled, the <code>DatabaseMetaData</code> of that connection will have the following changes in behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getCatalogs()</code> lists packages, with package names in <code>TABLE_CAT</code>.</p>
</li>
<li>
<p><code>getFunctions</code>, <code>getFunctionColumns</code>, <code>getProcedures</code>, and <code>getProcedureColumns</code> include information on procedures or functions in packages</p>
<div class="ulist">
<ul>
<li>
<p>Columns <code>FUNCTION_CAT</code>/<code>PROCEDURE_CAT</code> will report:</p>
<div class="ulist">
<ul>
<li>
<p>For packaged procedures and functions&#8201;&#8212;&#8201;the package name</p>
</li>
<li>
<p>For normal (non-package) procedures and functions&#8201;&#8212;&#8201;an empty string instead of <code>null</code> (because of the following rule)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If parameter <code>catalog</code> is <code>""</code> (empty string), only normal stored procedures or stored functions are reported.</p>
</li>
<li>
<p>If parameter <code>catalog</code> is <code>null</code>, both packaged and normal stored procedures or stored functions are reported.</p>
</li>
<li>
<p>For other values of parameter <code>catalog</code>, these metadata methods will only return procedures, functions, or their columns of the specified package (exact match, case-sensitive; not a <code>LIKE</code> pattern)</p>
</li>
<li>
<p>For normal (non-package) procedures and functions, the <code>SPECIFIC_NAME</code> column will be the unquoted function or procedure name (same as when <code>useCatalogAsPackage</code> is not enabled), and for packaged procedures and functions, it will be <code><em>quoted-package-name</em> + '.' + <em>quoted-routine-name</em></code> (e.g. <code>"SOME_PACKAGE"."SOME_FUNCTION"</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>getCatalogSeparator()</code> returns <code>"."</code> (string with period).</p>
</li>
<li>
<p><code>getCatalogTerm()</code> returns <code>"PACKAGE"</code>.</p>
</li>
<li>
<p><code>isCatalogAtStart()</code> returns <code>true</code>.</p>
</li>
<li>
<p><code>getMaxCatalogNameLength()</code> returns 31 or 63 depending on the maximum identifier length of the Firebird version.</p>
</li>
<li>
<p><code>supportsCatalogsInDataManipulation()</code> returns <code>true</code> (i.e. access selectable stored procedures and functions from packages).</p>
</li>
<li>
<p><code>supportsCatalogsInProcedureCalls()</code> returns <code>true</code>.</p>
</li>
<li>
<p>The other <code>supportsCatalogsIn<em>type</em>()</code> methods continue to return <code>false</code>.</p>
</li>
<li>
<p>Other metadata methods with a <code>catalog</code> parameter continue to ignore it, just like they do when <code>useCatalogAsPackage</code> is disabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>useCatalogAsPackage</code> connection property does not result in any other behaviour.</p>
</div>
<div class="paragraph">
<p>Keep in mind, that this is non-standard behaviour, and standard JDBC tools or libraries may not work correctly when this property is enabled.
This feature may be discontinued and removed in the future if Jaybird needs to implement &#8220;real&#8221; catalogs (e.g. because Firebird started supporting catalogs).</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-09-use-catalog-as-package.adoc" target="_blank" rel="noopener">jdp-2023-08: Use Catalog as Package</a></p>
</div>
</div>
<div class="sect2">
<h3 id="async-fetch"><a class="anchor" href="#async-fetch"></a>7.13. Asynchronous fetching</h3>
<div class="paragraph">
<p>For pure Java connections, non-holdable forward-only result sets now perform asynchronous fetches.
Asynchronous fetches are implemented for protocol implementation version 11 and higher (i.e. Firebird 2.1 or higher), but are formally only supported for protocol version 13 and higher (i.e. Firebird 3.0 or higher).</p>
</div>
<div class="paragraph">
<p>In normal usage of a result set, the first fetch will be a normal synchronous fetch.
If certain conditions are met, subsequent fetches will be performed asynchronously.</p>
</div>
<div class="paragraph">
<p>The conditions for using asynchronous fetch are considered an implementation detail and may change in point releases.
In Jaybird 6.0.0, the conditions to enable asynchronous fetching are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The result set has type <code>FORWARD_ONLY</code>.</p>
</li>
<li>
<p>The result set does not have a cursor name set.</p>
</li>
<li>
<p>Any synchronous fetch on the statement cursor retrieved at least 15 rows.
Be aware that the server may return fewer rows than the configured fetch size (default is 400), depending on Firebird version, row size and other factors.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the asynchronous fetch is triggered is also an implementation detail and may change in point releases.
In Jaybird 6.0.0, the conditions to perform an asynchronous fetch are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Size of the row buffer is equal to the &#8220;low-water mark&#8221;.</p>
<div class="paragraph">
<p>This &#8220;low-water mark&#8221; is calculated as ~33% of the maximum number of rows returned by previous fetches, with a minimum of 10 rows.</p>
</div>
<div class="paragraph">
<p>As a consequence of this condition, reducing the fetch size equal to or less than the &#8220;low-water mark&#8221; may cause asynchronous fetches to stop being triggered, as the buffer size may remain smaller than this &#8220;low-water mark&#8221; (this effect may be reduced if there is other activity on the connection after the asynchronous fetch was performed).
In that case, a synchronous fetch is triggered when the buffer is empty.</p>
</div>
</li>
<li>
<p>Fetch size at time of async fetch is larger than 1.
This may be the configured fetch size, or the fetch size derived taking into account the configured maximum row count.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Native connections do not support this type of asynchronous fetching, but <code>fbclient</code> itself provides a different form of internal asynchronous fetching for native connections.</p>
</div>
<div class="paragraph">
<p>Asynchronous fetching&#8201;&#8212;&#8201;for pure Java&#8201;&#8212;&#8201;can be disabled with the Boolean connection property <code>asyncFetch</code>, by setting it to <code>false</code>.
The system property <code>org.firebirdsql.jdbc.defaultAsyncFetch</code> can be used to disable it globally;
this system property is checked dynamically when the connection configuration is created.
These properties are primarily intended for troubleshooting or workarounds if it turns out this feature has problems;
they may be removed in a future Jaybird version once this feature has proven itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="blob-performance"><a class="anchor" href="#blob-performance"></a>7.14. Blob performance improvements</h3>
<div class="sect3">
<h4 id="blob-performance-read"><a class="anchor" href="#blob-performance-read"></a>7.14.1. Reading blobs</h4>
<div class="paragraph">
<p>Performance of reading blobs has been improved, especially when using <code>getBytes</code> on <code>ResultSet</code> or <code>Blob</code>, or <code>getString</code> on <code>ResultSet</code> or <code>Clob</code>, or reading from a blob input stream with <code>read(byte[], int, int)</code> and similar methods with a byte array and requested length greater than 50% of the configured <code>blobBufferSize</code>.</p>
</div>
<div class="paragraph">
<p>Testing on a local network (Wi-Fi) shows an increase in throughput of roughly 50-100% for reading large blobs with the default <code>blobBufferSize</code> of 16384.</p>
</div>
<div class="paragraph">
<p>These throughput improvements were only realised in the pure Java protocol, because there we had the opportunity to avoid all additional allocations by writing directly from the network stream into the destination byte array, and this allows us to ignore the configured <code>blobBufferSize</code> and use up to the maximum request size of 65535 bytes instead.</p>
</div>
<div class="paragraph">
<p>This is not possible for the JNA-based protocols (native/embedded), as the implementation requires a direct byte buffer to bridge to the native API, and thus we can&#8217;t ignore the <code>blobBufferSize</code>.
We were able to realise some other optimizations (in both pure Java and JNA), by avoiding allocation of a number of intermediate objects, but this has only marginal effects on the throughput.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-write"><a class="anchor" href="#blob-performance-write"></a>7.14.2. Writing blobs</h4>
<div class="paragraph">
<p>Performance of writing blobs was improved, especially when using <code>setBytes</code> on <code>PreparedStatement</code>, <code>ResultSet</code> or <code>Blob</code>, or <code>setString</code> on <code>PreparedStatement</code>, <code>ResultSet</code> or <code>Clob</code>, or writing to a blob output stream with <code>write(byte[], int, int)</code> and similar methods with a byte array larger than the configured <code>blobBufferSize</code>.
A smaller improvement was made when using arrays larger than 50% of the <code>blobBufferSize</code>.</p>
</div>
<div class="paragraph">
<p>Testing on a local network (Wi-Fi) shows an increase in throughput of roughly 300-400% for writing large blobs with the default <code>blobBufferSize</code> of 16384.
The improvement is not available for all methods of writing blobs, for example using <code>ResultSet.setBinaryStream</code> does not see this improvement, as it relies on the <code>blobBufferSize</code> for transferring the blob content.</p>
</div>
<div class="paragraph">
<p>Most of these throughput improvements were only realised in the pure Java protocol, because there we had the opportunity to avoid all additional allocations by writing directly from the source byte array to the network stream, and this allows us to ignore the configured <code>blobBufferSize</code> and use up to the maximum segment size of 65535 bytes instead.</p>
</div>
<div class="paragraph">
<p>For the JNA-based protocols (native/embedded) a smaller throughput improvement was realised, by using the maximum segment size for the first roundtrip if the array write used offset <code>0</code>.
If the length is larger than the maximum segment size, or if the offset is non-zero, we need to allocate a buffer (for subsequent segments in case offset is <code>0</code>), and thus cannot ignore the <code>blobBufferSize</code>.</p>
</div>
<div class="paragraph">
<p>Similar to the improvements for reading, we were also able to realise some other optimizations (in both pure Java and JNA), by avoiding allocation of a number of intermediate objects, but this has only marginal effects on the throughput.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-defer-open"><a class="anchor" href="#blob-performance-defer-open"></a>7.14.3. Deferred blob open</h4>
<div class="paragraph">
<p>Added in: Jaybird 6.0.1, backported from Jaybird 7</p>
</div>
<div class="paragraph">
<p>In the pure Java implementation, performance of reading and writing blobs was improved by deferring the server-side opening or creating of a blob until an actual server-side operation (putting or getting a segment, or getting blob info).
The open or create blob request is pipelined with the subsequent operation, avoiding a round trip to the server.
This is especially noticeable in connections with high latency.</p>
</div>
<div class="paragraph">
<p>Artificial testing on local WiFi with small blobs shows around 85% increase in throughput (comparing a 6.0.1-SNAPSHOT against 6.0.0).</p>
</div>
<div class="paragraph">
<p>The <a href="#blob-performance-inline-blob">Inline blob support</a> for Firebird 5.0.3 and higher replaces this improvement for smallish blobs, but it still has benefit for blobs larger than <code>maxInlineBlobSize</code> or blobs that are discarded when the inline blob cache is full.</p>
</div>
<div class="paragraph">
<p>This optimization is available for Firebird 2.1 and higher, but formally only supported for Firebird 3.0 and higher.</p>
</div>
<div class="paragraph">
<p>For native connections, a similar optimization&#8201;&#8212;&#8201;but only for reading blobs&#8201;&#8212;&#8201;is available when using a Firebird 5.0.2 or higher fbclient, independent of the Jaybird version.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-info-items"><a class="anchor" href="#blob-performance-info-items"></a>7.14.4. Requesting known info items on open</h4>
<div class="paragraph">
<p>Added in: Jaybird 6.0.1, backported from Jaybird 7</p>
</div>
<div class="paragraph">
<p>In the pure Java implementation, when an input blob is opened, all known blob information items are requested.
Subsequent blob information requests on the same <code>FbBlob</code> handle are fulfilled using the cached information.
If the request contains information items not in the cache, the request is sent to the server.</p>
</div>
<div class="paragraph">
<p>For access through JDBC, this optimization has little to no effect, as one of the few times Jaybird itself requests blob information is immediately after opening the blob, which is optimized by the <a href="#blob-performance-defer-open">deferred blob open</a>.
Direct use of <code>FirebirdBlob.BlobInputStream.length()</code> or the GDS-ng internal API may benefit from this change.
We&#8217;re also investigating further changes to the implementation of Jaybird that could benefit from this.</p>
</div>
<div class="paragraph">
<p>This optimization is available for Firebird 2.1 and higher, but formally only supported for Firebird 3.0 and higher.</p>
</div>
<div class="paragraph">
<p>For native connections, a similar optimization is available when using a Firebird 5.0.2 or higher fbclient, independent of the Jaybird version.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-inline-blob"><a class="anchor" href="#blob-performance-inline-blob"></a>7.14.5. Inline blob support</h4>
<div class="paragraph">
<p>Added in: Jaybird 6.0.2, backported from Jaybird 7</p>
</div>
<div class="paragraph">
<p>Introduced in Firebird 5.0.3 (protocol 19), inline blobs offer a significant performance improvement for querying smallish blobs.
As the name suggests, blobs are sent <em>inline</em> together with the row data, avoiding additional round trips to the server for reading the blob data and blob information.</p>
</div>
<div class="paragraph">
<p>There are two connection properties affecting inline blobs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>maxInlineBlobSize</code> (aliases: <code>max_inline_blob_size</code>, <code>isc_dpb_max_inline_blob_size</code>)</dt>
<dd>
<p>Maximum size in bytes of the blob (default: <code>65535</code>).<br>
A value of <code>0</code> will disable sending of inline blobs.</p>
<div class="paragraph">
<p>The maximum value is decided by the Firebird server, and is currently <code>65535</code>;
this may change in the future</p>
</div>
<div class="paragraph">
<p>If a blob is smaller than the specified size, the server will send it inline.
The size includes segment lengths, so the actual maximum blob data received is <code><em>N</em> * 2</code> bytes smaller, where <em>N</em> is the number of segments of the actual blob.</p>
</div>
<div class="paragraph">
<p>The default can be changed with system property <code>org.firebirdsql.jdbc.defaultMaxInlineBlobSize</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>maxBlobCacheSize</code> (aliases: <code>max_blob_cache_size</code>, <code>isc_dpb_max_blob_cache_size</code>)</dt>
<dd>
<p>Maximum size in bytes&#8201;&#8212;&#8201;per connection&#8201;&#8212;&#8201;of the blob cache (default: <code>10485760</code> or 10 MiB).<br>
A value of <code>0</code> will disable the cache, but does not disable sending of inline blobs.
Set <code>maxInlineBlobSize</code> to <code>0</code> to disable sending of inline blobs.</p>
<div class="paragraph">
<p>For pure Java, only the data size is counted towards the cache size.
For native, the segment lengths also count towards the cache size.</p>
</div>
<div class="paragraph">
<p>The default can be changed with system property <code>org.firebirdsql.jdbc.defaultMaxBlobCacheSize</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This feature works with pure Java and native connections when connecting to Firebird 5.0.3 or higher.
For native connections, a Firebird 5.0.3 or higher client library must be used.</p>
</div>
<div class="paragraph">
<p>If the maximum blob cache size is reached, received inline blobs will be discarded.
For pure Java connections, an inline blob is removed from the cache on first use, or when the transaction associated with the blob ends.
The native client implementation may have different cache eviction rules.</p>
</div>
<div class="paragraph">
<p>As pure Java connections remove the inline blob from the cache on first use, subsequent attempts to read the same blob&#8201;&#8212;&#8201;by getting a different instance of <code>java.sql.Blob</code> or through multiple calls to the <code>ResultSet.getXXX</code> methods&#8201;&#8212;&#8201;will use a server-side blob.
This can also happen if multiple columns or rows, even in different result sets on the same connection, point to the same blob id in the same transaction.</p>
</div>
<div class="paragraph">
<p>If you execute queries returning blobs, while those blobs are never actually opened, you may fill up the cache and later received inline blobs are then discarded.
Especially in long-running transactions, this may reduce the effectiveness of this feature.</p>
</div>
<div class="paragraph">
<p>Artificial testing on local WiFi with small blobs (200 bytes) shows a 30,000-45,000% (yes, thousand)<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup> increase in throughput comparing a 6.0.2-SNAPSHOT against 6.0.0, and a 15,000-25,000% increase in throughput comparing a 6.0.2-SNAPSHOT against 6.0.1.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-min-buf"><a class="anchor" href="#blob-performance-min-buf"></a>7.14.6. Minimum <code>blobBufferSize</code> 512 bytes</h4>
<div class="paragraph">
<p>As part of the performance improvements, a minimum <code>blobBufferSize</code> of 512 bytes was introduced.
Configuring values less than 512 will be ignored and use 512 instead.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-performance-max-segment"><a class="anchor" href="#blob-performance-max-segment"></a>7.14.7. Maximum segment size raised</h4>
<div class="paragraph">
<p>For connections to Firebird 3.0 and higher, the maximum segment size was raised from 32765 to 65535 bytes to match the maximum segment size supported by Firebird.</p>
</div>
<div class="paragraph">
<p>The maximum segment size is the maximum size for sending segments (<em>put</em>) to the server.
Due to protocol limitations, retrieving segments from the server (<em>get</em>) is two bytes (or multiples of two bytes) shorter<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-buffer-size"><a class="anchor" href="#blob-buffer-size"></a>7.14.8. Effectiveness of <code>blobBufferSize</code> larger than maximum segment size</h4>
<div class="paragraph">
<p>Previously, when reading blobs, a <code>blobBufferSize</code> larger than the maximum segment size was effectively ignored.
Now, when reading through an input stream, a <code>blobBufferSize</code> larger than the maximum segment size can be used.</p>
</div>
<div class="paragraph">
<p>Jaybird will use one or more roundtrips to fill the buffer.
To avoid inefficient fetches, a minimum of 90% of the buffer size will be filled up to the <code>blobBufferSize</code>.
This change is not likely to improve performance, but it may allow for optimizations when reading or transferring data in large chunks.</p>
</div>
<div class="paragraph">
<p>In general, setting the <code>blobBufferSize</code> larger than 65535 bytes will likely not improve performance.</p>
</div>
</div>
<div class="sect3">
<h4 id="blob-put-segment-limit"><a class="anchor" href="#blob-put-segment-limit"></a>7.14.9. Internal API changes for <code>FbBlob</code></h4>
<div class="paragraph">
<p>Three new methods were added to <code>FbBlob</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>int get(byte[] b, int off, int len)</code></dt>
<dd>
<p>populates the array <code>b</code>, starting at <code>off</code>, for the requested <code>len</code> bytes from the blob, and returns the actual number of bytes read.
This method will read until <code>len</code> bytes have been read, and only return less than <code>len</code> when end-of-blob was reached.</p>
</dd>
<dt class="hdlist1"><code>int get(byte[] b, int off, int len, float minFillFactor)</code></dt>
<dd>
<p>populates the array <code>b</code>, starting at <code>off</code>, for at least <code>minFillFactor</code> * <code>len</code> bytes (up to <code>len</code> bytes) from the blob, and returns the actual number of bytes read.</p>
</dd>
<dt class="hdlist1"><code>void put(byte[] b, int off, int len)</code></dt>
<dd>
<p>sends data from array <code>b</code> to the blob, starting at <code>off</code>, for the requested <code>len</code> bytes.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The documentation of method <code>FbBlob.putSegment(byte[])</code> contradicted itself, by requiring implementations to batch larger arrays, but also requiring them to throw an exception for larger arrays, and the actual implementations provided by Jaybird threw an exception.
This contradiction has been removed, and the implementations will now send arrays longer than the maximum segment size to the server in multiple <em>put</em> requests.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="allow-tx-stmts"><a class="anchor" href="#allow-tx-stmts"></a>7.15. Support for executing transaction management statements</h3>
<div class="paragraph">
<p>In Jaybird 5 and earlier, it was not possible to execute the transaction management statements <code>COMMIT</code>, <code>ROLLBACK</code> (without <code>RETAIN</code> or a savepoint) and <code>SET TRANSACTION</code>.
For <code>COMMIT</code> and <code>ROLLBACK</code> it would seem to work, but subsequent use of the connection would then break because the connection assumed it still had an active transaction.</p>
</div>
<div class="paragraph">
<p>Formally, the JDBC specification says&#8201;&#8212;&#8201;paraphrased&#8201;&#8212;&#8201;that if something can be done through the JDBC API, that those API methods should be used;
you should not use equivalent statements.
However, from a perspective of flexibility, and for example for executing scripts, it can be useful to be able to execute those statements.</p>
</div>
<div class="paragraph">
<p>Jaybird now optionally allows you to execute <code>COMMIT [WORK]</code>, <code>ROLLBACK [WORK]</code> and <code>SET TRANSACTION [&#8230;&#8203;]</code>.
By default, Jaybird 6 explicitly rejects attempts to execute those statements, instead of the half-working/half-broken situation of previous versions.</p>
</div>
<div class="paragraph">
<p>To allow execution of <code>COMMIT [WORK]</code>, <code>ROLLBACK [WORK]</code> and <code>SET TRANSACTION [&#8230;&#8203;]</code>, the connection property <code>allowTxStmts</code> needs to be set to <code>true</code>.
This can be done using a JDBC connection property <code>allowTxStmts</code>, or <code>setAllowTxStmts(boolean)</code> on <code>DataSource</code> instances.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Just because you can, doesn&#8217;t mean you should use this.
For code solutions, you should use the normal methods in the JDBC API whenever possible.
Only use this solution for scripts, or in case it is cumbersome or not possible to access the Jaybird extensions to the JDBC API to control the transaction configuration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the implementation, the use of <code>COMMIT</code> and <code>ROLLBACK</code> will not be executed as statements on the server, but instead call <code>Connection.commit()</code> and <code>Connection.rollback()</code>.
The <code>SET TRANSACTION</code> statement&#8201;&#8212;&#8201;if allowed&#8201;&#8212;&#8201;is executed with execute immediate, and not through a statement handle.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Contrary to its name, and the SQL standard behaviour, Firebird&#8217;s <code>SET TRANSACTION</code> immediately <strong>starts</strong> a transaction.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Enabling this feature can also make it easier to use the table reservation feature, compared to <code>FirebirdConnection.setTransactionParameters(TransactionParameterBuffer)</code> or <code>FirebirdConnection.setTransactionParameters(int, TransactionParameterBuffer)</code>, which requires access to the Jaybird API interfaces.</p>
</div>
<div class="paragraph">
<p>This feature has the following limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transaction management statements cannot be executed when auto-commit is enabled, or if the connection is participating in a distributed transaction.
This is the same behaviour as implemented for <code>Connection.commit()</code> and <code>Connection.rollback()</code>.</p>
</li>
<li>
<p>Executing <code>COMMIT</code> or <code>ROLLBACK</code>&#8201;&#8212;&#8201;when auto-commit is disabled&#8201;&#8212;&#8201;is silently ignored if there is no active transaction.
This is the same behaviour as implemented for <code>Connection.commit()</code> and <code>Connection.rollback()</code>.</p>
</li>
<li>
<p><code>SET TRANSACTION</code> cannot be executed if there is an active transaction.
In other words, you will need to call <code>Connection.commit()</code> or execute <code>COMMIT</code> (or roll back) before you can start a new transaction this way.</p>
</li>
<li>
<p>Transaction management statements are not supported by <code>Statement.addBatch(String)</code>, <code>PreparedStatement.addBatch()</code>, and <code>Connection.prepareCall(&#8230;&#8203;)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-01-explicit-support-for-transaction-statements.adoc" target="_blank" rel="noopener">jdp-2024-01: Explicit support for transaction statements</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="wire-buffer-sizes"><a class="anchor" href="#wire-buffer-sizes"></a>7.16. Configurable buffer sizes for the wire protocol</h3>
<div class="paragraph">
<p>The sizes of a number of buffers used in the wire protocol were increased from 512 bytes to 8192 bytes.
This specifically concerns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>wire compression&#8201;&#8212;&#8201;deflate (compression)</p>
</li>
<li>
<p>wire compression&#8201;&#8212;&#8201;inflate (decompression)</p>
</li>
<li>
<p>wire encryption&#8201;&#8212;&#8201;decrypt</p>
<div class="paragraph">
<p>There is no such buffer for the reverse (encryption), as this is already handled by the general output buffer.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This change might not be desirable in all situations as it increases the total amount of memory per connection, or there can be reasons to further increase these buffers.
To address this, we have added <em>system properties</em> to configure a number of buffers which were previously not configurable:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.wire.deflateBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for deflate (compression).
Has a minimum size of 512 and a default value of 8192.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.inflateBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for inflate (decompression).
Has a minimum size of 512 and a default value of 8192.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.decryptBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for decryption.
Has a minimum size of 512 and a default value 8192.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As the decryption input buffer determines the size of the decryption output buffer, the actual allocation is up to twice the specified value.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.inputBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for reading data from the socket.
Has a minimum size of 1024 and a default value of 16384.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property should not be confused with the socket buffer size (configurable with the <code>socketBufferSize</code> <em>connection property</em>).
Setting this value higher than <code>socketBufferSize</code> is unlikely to have any benefits.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.outputBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for writing data.
Has a minimum size of 1024 and a default value of 32767.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property should not be confused with the socket buffer size (configurable with the <code>socketBufferSize</code> <em>connection property</em>).
Contrary to the input buffer size, setting it higher than <code>socketBufferSize</code> might have performance benefits.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These properties need to be set before Jaybird is loaded and used (e.g. on the commandline with <code>-&zwj;D&lt;propertyName&gt;=&lt;propertyValue</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The minimum sizes and default values should be considered an implementation detail and might change in a future major version.</p>
</div>
<div class="paragraph">
<p>The &#8220;deflate&#8221; and &#8220;inflate&#8221; buffers are only used when wire compression is enabled.
The &#8220;decrypt&#8221; buffer is only applied when wire encryption is used (the default with Firebird 3.0 and higher).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The order of buffers for input is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Jaybird &#8656; [inflate &#8656;] [decrypt &#8656;] input &#8656; socket</pre>
</div>
</div>
<div class="paragraph">
<p>The order of buffers for output is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Jaybird &#8658; output [&#8658; deflate] &#8658; socket</pre>
</div>
</div>
<div class="paragraph">
<p>A future version may introduce connection properties to control this per connection.</p>
</div>
</div>
<div class="sect2">
<h3 id="event-manager-broken-connection"><a class="anchor" href="#event-manager-broken-connection"></a>7.17. Broken connection detection for event manager</h3>
<div class="paragraph">
<p>The event manager now attempts to detect if the underlying database connection is broken.
Once a broken connection is detected, the event manager will attempt to close or forcibly disconnect itself and report itself as not <em>connected</em>.</p>
</div>
<div class="paragraph">
<p>For proper detection of some types of network problems in a timely manner, it may be necessary to configure the <code>soTimeout</code> of the event manager <em>before</em> connecting.
When the <code>createFor(Connection)</code> method has been used, this can be configured through the <code>soTimeout</code> connection property, or&#8201;&#8212;&#8201;for pure Java connections only&#8201;&#8212;&#8201;the <code>setNetworkTimeout</code> method of the <code>Connection</code> object.</p>
</div>
<div class="paragraph">
<p>This detection depends on actual activity, like an event posting a new count, or a new event registration.</p>
</div>
</div>
<div class="sect2">
<h3 id="native-library-path"><a class="anchor" href="#native-library-path"></a>7.18. Connection property to specify native library path</h3>
<div class="paragraph">
<p>A connection property <code>nativeLibraryPath</code> was added to specify the <em>directory</em> where <code>fbclient</code> (for native connections), or <code>fbembed</code> or <code>fbclient</code> (for embedded connections) can be loaded.
If a file path is used instead of a directory path, the parent directory will be used for the search path.
In other words, it is not possible to use it load a differently named library.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property comes with a very important caveat: it only works for the first native or embedded connection (to a database or service) made within a JVM.
Once any client library is loaded, that library is used for all subsequent native and embedded connections.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This property is only exposed as a JDBC property.
For data sources, it needs to be set with <code>setProperty(String, String)</code> or <code>setNonStandardProperty(String)</code>.</p>
</div>
<div class="paragraph">
<p>The primary use case for this property is for situations where configuring the system property <code>jna.library.path</code> is not easy to do (e.g. in third-party applications).</p>
</div>
<div class="paragraph">
<p>For embedded connections, if there is a valid <code>FirebirdEmbeddedProvider</code> on the classpath, it will be used instead of the location specified by <code>nativeLibraryPath</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="client-info"><a class="anchor" href="#client-info"></a>7.19. Rewritten client info properties support</h3>
<div class="paragraph">
<p>Client info properties were introduced in JDBC 4.0 and implemented in Jaybird 2.2.
This support has been rewritten to remove some limitations and correct some problems with the previous implementation.</p>
</div>
<div class="paragraph">
<p>The new implementation discerns two types of property names:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>without context;
<em>get</em>/<em>set</em> in <code>USER_SESSION</code> context of <code>RDB$GET/SET_CONTEXT</code></p>
</li>
<li>
<p>with context, when the name ends in <code>@USER_SESSION</code>, <code>@USER_TRANSACTION</code> or <code>@SYSTEM</code>;
<em>get</em>/<em>set</em> <em>without</em> that suffix in the specified context.
Properties with multiple contexts (e.g. <code>property@SYSTEM@USER_SESSION</code>) are not allowed to prevent ambiguity.
Everything else is a property without context.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@USER_SESSION</code> is handled identical to <code>&lt;name&gt;</code>.
The &#8220;without context&#8221; name is preferred and recommended for <code>USER_SESSION</code> properties, and <code>Connection.getClientInfo()</code> will use the &#8220;without context&#8221; name as the key for <code>USER_SESSION</code> properties.</p>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@USER_TRANSACTION</code> is <em>set</em> and <em>get</em> as <code>&lt;name&gt;</code> in context <code>USER_TRANSACTION</code>.
When a connection is in auto-commit mode, attempts to <em>set</em> or <em>get</em> <code>USER_TRANSACTION</code> properties are ignored (nothing is stored, and <code>null</code> is returned without accessing the database).</p>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@SYSTEM</code> is retrieved as <code>&lt;name&gt;</code> in the context <code>SYSTEM</code>.
Properties in the <code>SYSTEM</code> context are read-only, so they cannot be <em>set</em>.
For <code>Connection.setClientInfo(String, String)</code>, attempts to <em>set</em> a <code>SYSTEM</code> property result in a <code>SQLClientInfoException</code>, for <code>Connection.setClientInfo(Properties)</code>, <code>SYSTEM</code> properties are silently ignored.</p>
</div>
<div class="paragraph">
<p>Attempts to retrieve non-existent properties, even from <code>SYSTEM</code> will return <code>null</code> and will not result in an exception.</p>
</div>
<div class="paragraph">
<p>A connection registers properties known to that specific connection.
By default, only the JDBC-specified properties <code>ApplicationName</code>, <code>ClientUser</code> and <code>ClientHostName</code> (see also below) are known.
A successful <em>get</em> or <em>set</em> of a property will register that property as a known property for the current connection only.</p>
</div>
<div class="paragraph">
<p>The method <code>Connection.getClientInfo()</code> will retrieve only known properties (the default properties and those registered for the current connection).
It will not attempt to query or identify other variables registered in any context.</p>
</div>
<div class="paragraph">
<p>The method <code>Connection.setClientInfo(Properties)</code> clears (sets to <code>NULL</code>) known properties in <code>USER_SESSION</code> and&#8201;&#8212;&#8201;if not in auto-commit&#8201;&#8212;&#8201;<code>USER_TRANSACTION</code> if they are not included in the <code>Properties</code> object.</p>
</div>
<div class="paragraph">
<p><code>DatabaseMetaData.getClientInfoProperties()</code> reports the JDBC-specified properties only;
it will not report the additional properties registered for the current connection.</p>
</div>
<div class="paragraph">
<p>The JDBC-specified properties are:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ApplicationName</code></dt>
<dd>
<p>The name of the application currently utilizing the connection</p>
</dd>
<dt class="hdlist1"><code>ClientUser</code></dt>
<dd>
<p>The name of the user that the application using the connection is performing work for.
This may not be the same as the username that was used in establishing the connection.</p>
</dd>
<dt class="hdlist1"><code>ClientHostname</code></dt>
<dd>
<p>The hostname of the computer the application using the connection is running on.</p>
</dd>
</dl>
</div>
</blockquote>
<div class="attribution">
<cite>JDBC API documentation of java.sql.Connection</cite>
</div>
</div>
<div class="paragraph">
<p>All JDBC-specified properties are <em>get</em> and <em>set</em> in <code>USER_SESSION</code>.
On <em>get</em> of <code>ApplicationName</code>, if this property is not currently set in <code>USER_SESSION</code>, it falls back to <em>get</em> the value from <code>CLIENT_PROCESS@SYSTEM</code>.
The <code>CLIENT_PROCESS@SYSTEM</code> value can be specified using the connection property <code>processName</code> or system property <code>org.firebirdsql.jdbc.processName</code>.
The <code>ClientUser</code> and <code>ClientHostname</code> properties are considered application-specific and have no default value or fallback.</p>
</div>
<div class="paragraph">
<p>Compared to the previous implementation, the important differences are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Connection.getClientInfo()</code> now reports properties;
the previous implementation always returned an empty <code>Properties</code> object.</p>
</li>
<li>
<p><code>Connection.getClientInfo(String)</code> with a property name without context now queries only <code>USER_SESSION</code>;
the previous implementation queried <code>USER_TRANSACTION</code>, and if not set, fell back to the value from <code>USER_SESSION</code>.
To retrieve from <code>USER_TRANSACTION</code> in the new implementation, use <code>&lt;name&gt;@USER_TRANSACTION</code>.</p>
</li>
<li>
<p><code>Connection.setClientInfo(Properties)</code> now clears known properties not included in the <code>Properties</code> object;
the previous implementation only <em>set</em> the included properties.</p>
</li>
<li>
<p>Successful <em>get</em> or <em>set</em> of a property registers it as known property of the connection and influences behaviour of subsequent calls to <code>getClientInfo()</code> and <code>setClientInfo(Properties)</code> on that connection</p>
</li>
<li>
<p><code>DatabaseMetaData.getClientInfoProperties</code> now reports the JDBC-specified properties, and nothing else;
the previous implementation always returned an empty result set.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Connection pools and known connection properties</div>
<div class="paragraph">
<p>If you use a connection pool populated from <code>org.firebirdsql.ds.FBConnectionPoolDataSource</code> or <code>org.firebirdsql.ds.FBXADataSource</code>, the known properties are reset each time the connection is handed out by the pool.
This assumes the pool uses <code>getConnection()</code> from <code>PooledConnection</code>/<code>XAConnection</code> each time it hands out the connection.
This reset only removes the property name from the list of known properties, it does not clear the property values from <code>USER_SESSION</code>.
If properties contain <em>sensitive</em> values you will need to explicitly clear them.</p>
</div>
<div class="paragraph">
<p>This reset is not applied when using a connection pool which is populated by different means (e.g. from <code>DriverManager</code> or from a normal <code>javax.sql.DataSource</code> like <code>org.firebirdsql.ds.FBSimpleDataSource</code>).
If your connection pool implementation supports custom code to reset a connection, and you need known properties to reset when a connection is reused, make it call <code>FirebirdConnection.resetKnownClientInfoProperties()</code>, or call it yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">if (connection.isWrapperFor(FirebirdConnection.class)) {
    connection.unwrap(FirebirdConnection.class)
            .resetKnownClientInfoProperties();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the future, Jaybird may be changed to also perform this reset in <code>Connection.beginRequest()</code> and/or <code>Connection.endRequest()</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-11-new-design-client-info-properties.adoc" target="_blank" rel="noopener">jdp-2023-11: New design client info properties</a></p>
</div>
</div>
<div class="sect2">
<h3 id="timestamp-localdate-localtime"><a class="anchor" href="#timestamp-localdate-localtime"></a>7.20. <code>TIMESTAMP</code> fields now accept <code>LocalDate</code> and <code>LocalTime</code></h3>
<div class="paragraph">
<p>The JDBC specification does not specify support for <code>LocalDate</code> and <code>LocalTime</code> on <code>TIMESTAMP</code> (without time zone).
However, when we introduced support for the <code>java.time</code> types, we implemented support for getting <code>LocalDate</code> and <code>LocalTime</code> (through <code>getObject</code>), but did not provide support for setting values of those types (through <code>setObject</code>) on <code>TIMESTAMP</code>.</p>
</div>
<div class="paragraph">
<p>We have now addressed this inconsistency, by also introducing support for setting these types on <code>TIMESTAMP</code> with the following behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>setObject(&#8230;&#8203;, localTime)</code> sets a <code>LocalDateTime</code> derived as <code>LocalDate.EPOCH.atTime(localTime)</code> (i.e. on 1970-01-01)</p>
</li>
<li>
<p><code>setObject(&#8230;&#8203;, localDate)</code> sets a <code>LocalDateTime</code> derived as <code>localDate.atStartOfDay()</code> (i.e. at 00:00:00)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="no-close-after-last"><a class="anchor" href="#no-close-after-last"></a>7.21. <code>ResultSet</code> in auto-commit no longer closed after last row</h3>
<div class="paragraph">
<p>In previous Jaybird versions, iterating over a forward-only result set in auto-commit mode would implicitly close the result set after the last row was fetched&#8201;&#8212;&#8201;i.e. when <code>next()</code> returned <code>false</code>.
This behaviour complied with the JDBC 3.0 requirements, but in JDBC 4.0 this requirement was removed, but still allowed.</p>
</div>
<div class="paragraph">
<p>In Jaybird 6, this implicit close has been removed.
In auto-commit mode, a result set will now remain open until explicitly closed using <code>ResultSet.close()</code>, when any statement is executed, when the auto-commit mode is disabled, or by the close of the <code>Statement</code> or <code>Connection</code>.</p>
</div>
<div class="paragraph">
<p>As a result set close is an auto-commit boundary, this change may delay commit of the active transaction until another action on the connection.
If you relied on this implicit close for correctness of your application, you may need to add an explicit call to <code>ResultSet.close()</code>&#8201;&#8212;&#8201;e.g. using try-with-resources.</p>
</div>
<div class="paragraph">
<p>For more information, see also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-03-do-not-close-result-set-after-last-row-in-auto-commit.adoc" target="_blank" rel="noopener">jdp-2024-03: Do not close result set after last row in auto-commit</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="scroll-rs-update-behavior"><a class="anchor" href="#scroll-rs-update-behavior"></a>7.22. Changes to behaviour of updatable scrollable result sets</h3>
<div class="paragraph">
<p>Jaybird 5 introduced support for server-side scrollable cursors on Firebird 5.0 and higher in the pure Java protocol.
This can be enabled using the connection property <code>scrollableCursor=SERVER</code>.</p>
</div>
<div class="paragraph">
<p>For implementation reasons, updatable server-side scrollable cursors had a different behaviour than the emulated client-side scrollable cursors.
These differences were:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New rows are inserted at the end of the cursor;
in emulated they were inserted immediately before the current row.</p>
</li>
<li>
<p>Deleted rows have an all-<code>null</code> marker row;
in emulated the row was removed from the cursor.</p>
</li>
<li>
<p>The result set reports <code>true</code> for <code>rowDeleted()</code>, <code>rowInserted()</code> or <code>rowUpdated()</code> for&#8201;&#8212;&#8201;respectively&#8201;&#8212;&#8201;deleted, inserted or updated rows;
in emulated these always reported <code>false</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Jaybird 6, this new behaviour is now also used for the updatable emulated scrollable cursors.
The reason is that having two different sets of behaviours can be confusing, as it makes it impossible to switch between the two without having to account for the behavioural differences (either intentionally, or because you&#8217;re connecting with the native or embedded protocol, or to an older version of Firebird).</p>
</div>
<div class="paragraph">
<p>We&#8217;re considering to make server-side scrollable cursors the default in a future Jaybird version (Jaybird 7 or later).</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-05-behavior-of-updatable-result-sets.adoc" target="_blank" rel="noopener">jdp-2024-05: Behaviour of Updatable Result Sets</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="custom-socket-factory"><a class="anchor" href="#custom-socket-factory"></a>7.23. Custom socket factory for pure Java connections</h3>
<div class="paragraph">
<p>A custom socket factory can now be specified, to customize the creation of the <code>java.net.Socket</code> instance of a pure Java database or service connection.</p>
</div>
<div class="paragraph">
<p>The connection property <code>socketFactory</code> accepts the class name of an implementation of <code>javax.net.SocketFactory</code>.
This socket factory is created anew for each connection.
If <code>socketFactory</code> is not specified, Jaybird will use <code>SocketFactory.getDefault()</code> as its factory.</p>
</div>
<div class="paragraph">
<p>The <code>SocketFactory</code> implementation must adhere to the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The class must have a public single-arg constructor accepting a <code>java.util.Properties</code> object, or a public no-arg constructor.</p>
</li>
<li>
<p>The implementation of <code>SocketFactory#createSocket()</code> must return an unconnected socket;
the other <code>createSocket</code> methods are not called by Jaybird.</p>
<div class="paragraph">
<p>If you don&#8217;t want to implement the other <code>createSocket</code> methods, we recommend throwing <code>java.lang.UnsupportedOperationException</code> with a clear message from those methods.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to pass custom connection properties to the socket factory if it has a public single-arg constructor accepting a <code>Properties</code> object.
Jaybird will instantiate the socket factory with a <code>Properties</code> object containing <em>only</em> the connection properties with the suffix <code>@socketFactory</code> and non-<code>null</code> values;
non-string values are converted to string.
In the future, we may also&#8201;&#8212;&#8201;selectively&#8201;&#8212;&#8201;pass other connection properties, but for now we only expose those properties that are explicitly set for the socket factory.</p>
</div>
<div class="paragraph">
<p>For example, say we have some custom socket factory called <code>org.example.CustomProxySocketFactory</code> with a <code>CustomProxySocketFactory(Properties)</code> constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">var props = new Properties()
props.setProperty("user", "sysdba");
props.setProperty("password", "masterkey");
props.setProperty("socketFactory", "org.example.CustomProxySocketFactory");
props.setProperty("proxyHost@socketFactory", "localhost");
props.setProperty("proxyPort@socketFactory", "1234");
props.setProperty("proxyUser@socketFactory", "proxy-user");
props.setProperty("proxyPassword@socketFactory", "proxy-password");

try (var connection = DriverManager.getConnection(
        "jdbc:firebird://remoteserver.example.org/db", props)) {
    // use connection
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create the specified socket factory, passing a <code>Properties</code> object containing <strong>only</strong> the four custom properties ending in <code>@socketFactory</code>.
The other properties&#8201;&#8212;&#8201;here <code>user</code>, <code>password</code> and <code>socketFactory</code>&#8201;&#8212;&#8201;are <strong>not</strong> passed to the socket factory.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-09-custom-socket-factory-for-pure-java-connections.adoc">jdp-2024-09: Custom socket factory for pure Java connections</a></p>
</div>
</div>
<div class="sect2">
<h3 id="other-fixes-and-changes"><a class="anchor" href="#other-fixes-and-changes"></a>7.24. Other fixes and changes</h3>
<div class="ulist">
<ul>
<li>
<p>Improvement: Setting oversized strings on <code>CHAR</code> or <code>VARCHAR</code> parameters with character set UTF8 will now throw a <code>DataTruncation</code> exception on <code>setString</code> (and not set a value) instead of a <code>SQLException</code> with a &#8220;string right truncation&#8221; error on execute (<a href="https://github.com/FirebirdSQL/jaybird/issues/396">#396</a>)</p>
<div class="paragraph">
<p>With this change, the behaviour for UTF8 is now consistent with that of single-byte character sets.
For UTF8, the <code>DataTruncation</code> reports the transfer size and data size in Unicode codepoints.
For other multibyte character sets, the <code>DataTruncation</code> reports those sizes in bytes.
This change is not applied to UNICODE_FSS, as Firebird 3.0 and earlier do not enforce character length limits for this character set, only byte length limits.</p>
</div>
<div class="paragraph">
<p>The <code>setBytes</code> method on <code>CHAR</code> and <code>VARCHAR</code> parameters only check the byte length limit.</p>
</div>
</li>
<li>
<p>Improvement: Implemented <code>java.sql.Connection.abort(Executor)</code> to forcibly abort a connection (<a href="https://github.com/FirebirdSQL/jaybird/issues/496">#496</a>)</p>
<div class="paragraph">
<p>The <code>java.sql.Connection</code> is marked closed immediately, after which the executor is used to mark client-side statements and result sets as closed, and then closes the actual physical connection.
The close of the physical connection is not a clean close and may result in &#8220;connection reset by peer&#8221; errors (e.g. error 10054 on Windows, error 104 on Linux) logged in <code>firebird.log</code>.
Active transactions may not be rolled back immediately;
this will be delayed until the server detects that the connection was closed.
It is possible that some listeners are not informed of the connection, statement or result set close.
When a security manager is active, calling <code>abort</code> requires the <code>SQLPermission</code> &#8220;callAbort&#8221;.</p>
</div>
</li>
<li>
<p>Changed: <code>DatabaseMetaData.getTypeInfo()</code> column <code>FIXED_PREC_SCALE</code> (column 11) now returns <code>false</code> for all data types except <code>NUMERIC</code> and <code>DECIMAL</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/551">#551</a>)</p>
<div class="paragraph">
<p>This was done because of the stated requirement &#8220;<em>can it be a money value</em>&#8221;.
Previously almost all types returned <code>true</code> (including&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;<code>BOOLEAN</code> and <code>TIMESTAMP</code>, which are definitely not money types).</p>
</div>
</li>
<li>
<p>Consistent use of <code>BigDecimal.valueOf(double)</code> instead of a combination of <code>new BigDecimal(double)</code> and <code>BigDecimal.valueOf(double)</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/553">#553</a>)</p>
</li>
<li>
<p>Switched blob identification in message BLR from <code>blr_quad</code> to <code>blr_blob2</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/726">#726</a>)</p>
</li>
<li>
<p>Removed <code>finalize()</code> methods and&#8201;&#8212;&#8201;where it made sense&#8201;&#8212;&#8201;replaced them with use of <code>Cleaner</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/727">#727</a>)</p>
</li>
<li>
<p>Fixed: <code>FBResultSetMetaData.getPrecision</code> would always estimate the precision of <code>NUMERIC</code> or <code>DECIMAL</code> columns instead of obtaining the actual precision if the column position was 71 or higher (<a href="https://github.com/FirebirdSQL/jaybird/issues/731">#731</a>)</p>
<div class="paragraph">
<p>This fix was backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>Optimized the query to retrieve extended field info for <code>ResultSetMetaData.getPrecision</code> to only retrieve columns of type <code>NUMERIC</code> or <code>DECIMAL</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/732">#732</a>)</p>
<div class="paragraph">
<p>This improvement was backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>Added methods <code>List&lt;String&gt; getTypeAliasList()</code> and <code>List&lt;String&gt; getSupportedProtocolList()</code> to <code>GDSFactoryPlugin</code>, and deprecated <code>String[] getTypeAliases()</code> and <code>String[] getSupportedProtocols()</code> for removal in Jaybird 7 or later</p>
</li>
<li>
<p>Fixed formatting of <code>isc_formatted_exception</code> to not repeat the original parameters of the exception (<a href="https://github.com/FirebirdSQL/jaybird/issues/749">#749</a>)</p>
</li>
<li>
<p>Added aliases <code>ApplicationName</code> and <code>applicationName</code> for connection property <code>processName</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/751">#751</a>)</p>
</li>
<li>
<p>Fixed: on <code>CHAR</code> fields, a too short value could be returned if the string contained one or more codepoints represented by surrogate pairs and the string length in <code>char</code> exceeded the maximum string length (<a href="https://github.com/FirebirdSQL/jaybird/issues/760">#760</a>)</p>
<div class="paragraph">
<p>We now truncate the returned string if the codepoint count exceeds the maximum string length.</p>
</div>
<div class="paragraph">
<p>This change was also backported to Jaybird 5.0.3.</p>
</div>
</li>
<li>
<p>Improvement: Do not reject attempts to read blob id 0 (<a href="https://github.com/FirebirdSQL/jaybird/issues/764">#764</a>)</p>
<div class="paragraph">
<p>Previously, Jaybird rejected attempts to read blobs with blob id <code>0</code> (not on all code paths, for some only when assertions are enabled).
Formally, blob id <code>0</code> is not a valid blob id, but in practice they can occur (e.g. due to bugs, or access components/drivers explicitly setting a blob column to id <code>0</code>).
Other drivers and tools simply send the requests for blob id <code>0</code> to the server, which then treats it as an empty blob.
For consistency, we decided to let Jaybird handle it the same.</p>
</div>
<div class="paragraph">
<p>This change was also backported to Jaybird 5.0.3.</p>
</div>
</li>
<li>
<p>Improvement: <code>Statement.getResultSet</code> no longer throws a <code>SQLException</code> with message &#8220;Only one result set at a time/statement&#8221; if the current result set has already been returned by <code>executeQuery</code> or a previous call to <code>getResultSet</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/762">#762</a>)</p>
<div class="paragraph">
<p>Repeated calls to <code>getResultSet</code> will now return the current result set.
As part of this change implementations of <code>FirebirdStatement.getCurrentResultSet</code> now simply returns <code>getResultSet</code>, and the <code>getCurrentResultSet</code> method has been deprecated for removal in Jaybird 7.</p>
</div>
<div class="paragraph">
<p>This change was also backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>Fixed: The implementation of <code>Blob.getBytes(long, int)</code> threw a <code>SQLException</code> if the remaining bytes of the blob were less than the requested number of bytes (<a href="https://github.com/FirebirdSQL/jaybird/issues/767">#767</a>)</p>
<div class="paragraph">
<p>The JDBC API specifies &#8220;<em>This <code>byte</code> array contains up to <code>length</code> consecutive bytes starting at position pos.</em>&#8221;, so the implementation was changed to return up to <code>length</code> bytes, or the remaining actual blob length, whichever is shorter.</p>
</div>
<div class="paragraph">
<p>The JDBC API does not specify what should happen if the requested position is beyond the end-of-blob.
The modified implementation returns an empty array, but given this is unspecified behaviour, we reserve the option to change this in the future to throw an exception instead.</p>
</div>
</li>
<li>
<p>Fixed: <code>CallableStatement.getXXX(String)</code> could return value from wrong column (<a href="https://github.com/FirebirdSQL/jaybird/issues/771">#771</a>)</p>
<div class="paragraph">
<p>This change was also backported to Jaybird 4.0.10 and Jaybird 5.0.3.</p>
</div>
</li>
<li>
<p><code>FBResultSetNotUpdatableException</code> now extends <code>SQLNonTransientException</code> instead of <code>FBSQLException</code>.</p>
</li>
<li>
<p>Jaybird no longer throws any instances of <code>FBSQLException</code>.</p>
<div class="paragraph">
<p><code>FBSQLException</code> has been deprecated for removal in Jaybird 7.</p>
</div>
</li>
<li>
<p>Fixed: FBRowUpdater incorrectly considers result set with only partial PK updatable (<a href="https://github.com/FirebirdSQL/jaybird/issues/780">#780</a>)</p>
<div class="paragraph">
<p>This change also improves performance of <code>updateRow()</code>, <code>insertRow()</code>, <code>deleteRow()</code> and <code>refreshRow()</code>.
The best row identifier or <code>RDB$DB_KEY</code> were detected <em>each time</em> when calling <code>updateRow()</code>, <code>insertRow()</code>, <code>deleteRow()</code>, or <code>refreshRow()</code>.
This has been improved so this detection is done once, and in a way that non-updatable result sets can now be downgraded to <code>CONCUR_READ_ONLY</code> instead of throwing an exception when performing the modification.</p>
</div>
<div class="paragraph">
<p>This change was backported to Jaybird 5.0.4.</p>
</div>
</li>
<li>
<p>Improved detection of (non-)updatable result sets.</p>
<div class="paragraph">
<p>If the best row identifier was not matched, but the result set contains <code>RDB$DB_KEY</code>, we will now consider the result set updatable.
However, if the table in question has a primary key, and the columns missing from the result set are not generated, this may still fail when calling <code>ResultSet.insertRow()</code>.</p>
</div>
</li>
<li>
<p>The user manager API (<code>UserManager</code>/<code>FBUserManager</code> and <code>User</code>/<code>FBUser</code> in package <code>org.firebirdsql.management</code>) has been deprecated (<a href="https://github.com/FirebirdSQL/jaybird/issues/782">#782</a>)</p>
<div class="paragraph">
<p>We do not plan to remove this API at this time, but we recommend that you switch to using the <a href="https://www.firebirdsql.org/file/documentation/chunk/en/refdocs/fblangref50/fblangref50-security-user.html#fblangref50-security-user">SQL user management statements</a>.</p>
</div>
</li>
<li>
<p>Fixed: Use of offset timezone names (e.g. <code>+05:00</code>) for <code>sessionTimeZone</code> would result in a warning being logged, and an incorrect conversion applied (in UTC instead of the offset) when using the legacy time types (<a href="https://github.com/FirebirdSQL/jaybird/issues/786">#786</a>)</p>
<div class="paragraph">
<p>This change was also backported to Jaybird 5.0.4.</p>
</div>
</li>
<li>
<p>New feature: Added column <code>JB_PK_INDEX_NAME</code> to the result set of <code>DatabaseMetaData.getPrimaryKeys</code> with the name of the index backing the primary key (<a href="https://github.com/FirebirdSQL/jaybird/issues/791">#791</a>)</p>
<div class="paragraph">
<p>Given this is a non-standard extension, it is advisable to retrieve this column by name, not by position.</p>
</div>
</li>
<li>
<p>Improvement: <code>sessionTimeZone</code> now also accepts the Java offset names (<code>GMT[&#43;-]HH:MM</code>), which will be automatically converted to the Firebird compatible name (<code>[&#43;-]HH:MM</code>).</p>
</li>
<li>
<p>New feature: <code>ResultSetMetaData.isAutoIncrement(int)</code> reports <code>true</code> for identity columns <strong>if</strong> Jaybird can identify the underlying table and column (<a href="https://github.com/FirebirdSQL/jaybird/issues/793">#793</a>)</p>
<div class="paragraph">
<p>This feature was backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>New feature: Boolean connection property <code>extendedMetadata</code> (default <code>true</code>) to disable querying of extended metadata for <code>getPrecision(int)</code> and <code>isAutoIncrement(int)</code> of <code>ResultSetMetaData</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/795">#795</a>)</p>
<div class="paragraph">
<p>Disabling extended metadata may improve performance of these <code>ResultSetMetaData</code> methods in exchange for estimated precision information of <code>NUMERIC</code> and <code>DECIMAL</code> columns, and not being able to determine the auto-increment status of <code>INTEGER</code>, <code>BIGINT</code> or <code>SMALLINT</code> columns.</p>
</div>
<div class="paragraph">
<p>This feature was backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>Improvement: The <code>FILTER_CONDITION</code> of <code>DatabaseMetaData.getIndexInfo</code> is populated for Firebird 5.0 partial indices (<a href="https://github.com/FirebirdSQL/jaybird/issues/797">#797</a>)</p>
<div class="paragraph">
<p>This improvement was backported to Jaybird 5.0.5.</p>
</div>
</li>
<li>
<p>Improvement: Added column <code>JB_PK_INDEX_NAME</code> and <code>JB_FK_INDEX_NAME</code> to the result set of to <code>getImportedKeys</code>, <code>getExportedKeys</code> and <code>getCrossReference</code> of <code>DatabaseMetaData</code> with the names of the index backing the primary key and foreign key (<a href="https://github.com/FirebirdSQL/jaybird/issues/798">#798</a>)</p>
<div class="paragraph">
<p>Given this is a non-standard extension, it is advisable to retrieve these columns by name, not by position.</p>
</div>
</li>
<li>
<p>Change: <code>TYPE_FORWARD_ONLY</code> is no longer upgraded to <code>TYPE_SCROLL_INSENSITIVE</code> when requesting holdable result sets explicitly (holdability <code>HOLD_CUSORS_OVER_COMMIT</code>) or implicitly (<code>defaultResultSetHoldable=true</code> when not specifying holdability) (<a href="https://github.com/FirebirdSQL/jaybird/issues/802">#802</a>)</p>
<div class="paragraph">
<p>See also <a href="#compat-rs-fw-only-holdable">Forward-only holdable result sets no longer upgraded to scroll-insensitive</a>.</p>
</div>
</li>
<li>
<p>Improvement: <code>isPoolable()</code> on <code>PreparedStatement</code> and <code>CallableStatement</code> now returns the default of <code>true</code>&#8201;&#8212;&#8201;<code>Statement</code> returns <code>false</code>&#8201;&#8212;&#8201;as required by JDBC, and <code>setPoolable</code> records the value set to be returned by <code>isPoolable</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/803">#803</a>)</p>
<div class="paragraph">
<p>To be clear, Jaybird does not provide statement pooling.
This change is only about returning and recording the poolable information for JDBC compliance, so it can be used by&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;connection pool implementations that provide statement pooling.</p>
</div>
</li>
<li>
<p>The state of <code>Connection.setReadOnly(boolean)</code> was not retained after calling <code>Connection.setTransactionIsolation(int)</code> or other method calls that changed the current transaction parameter buffer (<a href="https://github.com/FirebirdSQL/jaybird/issues/805">#805</a>)</p>
</li>
<li>
<p>Fixed: Exceptions during statement execution did not always complete the statement, which could delay transaction commit in auto-commit mode (<a href="https://github.com/FirebirdSQL/jaybird/issues/806">#806</a>)</p>
<div class="paragraph">
<p>This fix was backported to Jaybird 5.0.6.</p>
</div>
</li>
<li>
<p>Fixed: <code>ResultSet.isBeforeFirst()</code> and <code>ResultSet.isAfterLast()</code> should always report <code>false</code> for an empty result set (<a href="https://github.com/FirebirdSQL/jaybird/issues/808">#808</a>)</p>
</li>
<li>
<p>Most public classes in package <code>org.firebirdsql.jdbc</code> have been annotated with <code>@InternalApi</code> to reflect that they are not actually part of the public API of Jaybird.</p>
<div class="paragraph">
<p>Informally, these classes were already considered internal API, but given they are <code>public</code>, we now explicitly and formally document their status for clarity.</p>
</div>
<div class="paragraph">
<p>Where possible, use the standard JDBC interfaces.
If you need access to Firebird-specifics, unwrap or cast to the <code>org.firebirdsql.jdbc.FirebirdXXX</code> interfaces.
Only cast to or otherwise access the concrete classes of <code>org.firebirdsql.jdbc</code> if you really have to, and keep in mind that their API&#8201;&#8212;&#8201;if not defined in <code>java.sql</code> or <code>FirebirdXXX</code> interfaces&#8201;&#8212;&#8201;may change in point releases.</p>
</div>
<div class="paragraph">
<p>If you have a clear use-case that currently requires access to the concrete implementation classes, and you think it should be possible through a public API, please let us know on <a href="https://groups.google.com/g/firebird-java">firebird-java</a> or the <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a>.</p>
</div>
</li>
<li>
<p>Improvement: moved methods <code>getExecutionPlan()</code> and <code>getExplainedExcutionPlan()</code> from <code>FirebirdPreparedStatement</code> to <code>FirebirdStatement</code>, and clarified behaviour.</p>
<div class="paragraph">
<p>We also fixed a potential <code>NullPointerException</code> in the implementation of these methods in <code>PreparedStatement</code> and <code>CallableStatement</code>.</p>
</div>
<div class="paragraph">
<p>The methods <code>getLastExecutionPlan()</code> and <code>getLastExplainedExecutionPlan()</code> which were already defined in <code>FirebirdStatement</code> now have a default implementation that call <code>getExecutionPlan()</code> and <code>getExplainedExecutionPlan()</code>.
These methods have been deprecated with the advice to use the new getters.
For now, we have no plans to remove these methods in a future release.</p>
</div>
</li>
<li>
<p>Added dependency on <a href="https://jspecify.dev/"><code>org.jspecify:jspecify</code></a> for nullability annotations.</p>
<div class="paragraph">
<p>We are working on adding nullability information where applicable, but right now annotation of Jaybird is far from complete, and this will generally only be added when we touch a class for other reasons.
The addition of these annotations is intended for making it easier for us to reason about the implementation, and get static analysis warnings about possible programming errors.
Hopefully it will&#8201;&#8212;&#8201;in time&#8201;&#8212;&#8201;provide some benefits for users of Jaybird&#8217;s extension interfaces and &#8220;internal&#8221; APIs.</p>
</div>
<div class="paragraph">
<p>If a type or its containing package is not annotated, consider return values and parameters of its methods nullable unless stated otherwise in the API documentation.</p>
</div>
<div class="paragraph">
<p>In practice, this is an optional dependency, but Maven will pull it in by default, as that is recommended by JSpecify.
If the JSpecify JAR is not included on the classpath or modulepath, Jaybird will still work.</p>
</div>
</li>
<li>
<p><code>DatabaseMetaData</code> now reports <code>ResultSet.TYPE_SCROLL_SENSITIVE</code> as not supported, as it is always downgraded to <code>TYPE_SCROLL_INSENSITIVE</code>, and thus effectively not supported.</p>
<div class="paragraph">
<p>This affects the return value of the methods <code>supportsResultSetType(int)</code>, <code>supportsResultSetConcurrency(int, int)</code>, <code>ownUpdatesAreVisible(int)</code>, <code>ownDeletesAreVisible(int)</code>, <code>ownInsertsAreVisible(int)</code>.</p>
</div>
</li>
<li>
<p>Improvement: <code>setObject</code>/<code>updateObject</code> methods on <code>PreparedStatement</code>, <code>CallableStatement</code> and <code>ResultSet</code> with the <code>int scaleOrLength</code> parameter will now redirect to variants accepting a length of <code>set/updateBinaryStream</code> for <code>InputStream</code> and <code>set/updateCharacterStream</code> for <code>Reader</code> (<a href="https://github.com/FirebirdSQL/jaybird/issues/822">#822</a>)</p>
</li>
<li>
<p>New feature: Reporting of <code>SQLWarning</code>s can be disabled with connection property <code>reportSQLWarnings</code> (supported case-insensitive values: <code>ALL</code> (default), <code>NONE</code>) (<a href="https://github.com/FirebirdSQL/jaybird/issues/825">#825</a>)</p>
<div class="paragraph">
<p>The default can be overridden globally using system property <code>org.firebirdsql.jdbc.defaultReportSQLWarnings</code>.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatibility-changes"><a class="anchor" href="#compatibility-changes"></a>8. Compatibility changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird 6 introduces some changes in compatibility and announces future breaking changes.</p>
</div>
<div class="paragraph">
<p><strong>The list might not be complete, if you notice a difference in behavior that is not listed, please <a href="https://github.com/FirebirdSQL/jaybird/issues" target="_blank" rel="noopener">report it as bug</a>.</strong>
It might have been a change we forgot to document, but it could just as well be an implementation bug.</p>
</div>
<div class="sect2">
<h3 id="support-for-firebird-25-dropped"><a class="anchor" href="#support-for-firebird-25-dropped"></a>8.1. Support for Firebird 2.5 dropped</h3>
<div class="paragraph">
<p>Jaybird 6 has dropped support for Firebird 2.5 (see also <a href="https://github.com/FirebirdSQL/jaybird/tree/master/devdoc/jdp/jdp-2021-03-drop-firebird-2-5-support.md" target="_blank" rel="noopener">jdp-2021-03: Drop Firebird 2.5 support</a>).</p>
</div>
<div class="paragraph">
<p>By default, Jaybird 6 will only connect to Firebird 3.0 and higher.
See also <a href="#unsupported-protocols-disabled">Unsupported protocol version disabled by default</a>.</p>
</div>
<div class="paragraph">
<p>If the version 12 protocol (Firebird 2.5) is explicitly enabled, we expect the driver to remain functional, but chances are certain metadata&#8201;&#8212;&#8201;e.g. <code>DatabaseMetaData</code>&#8201;&#8212;&#8201;will break if we use features introduced in newer Firebird versions.</p>
</div>
</div>
<div class="sect2">
<h3 id="unsupported-protocols-disabled"><a class="anchor" href="#unsupported-protocols-disabled"></a>8.2. Unsupported protocol version disabled by default</h3>
<div class="paragraph">
<p>The wire protocol versions for Firebird 2.5 and earlier are disabled by default to disallow connection for the pure Java protocol.
Attempts to connect to Firebird 2.5 or earlier will result in error &#8220;<em>connection rejected by remote interface</em>&#8221; (<code>335544421</code> or <code>isc_connect_reject</code>).
You can use connection property <code>enableProtocol=*</code> or&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;<code>enableProtocol=10,11,12</code> to re-enable these protocols, or use the native protocol to connect instead.</p>
</div>
<div class="paragraph">
<p>As these protocols&#8201;&#8212;&#8201;and their Firebird versions&#8201;&#8212;&#8201;are not supported, it is possible things will break, especially for metadata&#8201;&#8212;&#8201;e.g. <code>DatabaseMetaData</code> if we use features introduced in newer Firebird versions.</p>
</div>
<div class="paragraph">
<p>See also <a href="#unsupported-protocol">Pure Java will not connect to unsupported Firebird versions by default</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="support-for-java-before-17-dropped"><a class="anchor" href="#support-for-java-before-17-dropped"></a>8.3. Support for Java versions before Java 17 dropped</h3>
<div class="paragraph">
<p>Jaybird 6 does not support Java versions before Java 17.
You will need to upgrade to Java 17 or higher, or remain on Jaybird 5.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 will serve as a form of &#8220;long-term support&#8221; for Java 8 and 11, with maintenance releases at least until the release of Jaybird 7.</p>
</div>
</div>
<div class="sect2">
<h3 id="support-native-embedded"><a class="anchor" href="#support-native-embedded"></a>8.4. Native and embedded require extra artifact</h3>
<div class="paragraph">
<p>The main <code>jaybird</code> artifact no longer provides native and embedded support.
Add the <code>jaybird-native</code> artifact if you use native or embedded (JDBC URL prefix <code>jdbc:firebird[sql]:native:</code> or <code>jdbc:firebird[sql]:embedded:</code>).</p>
</div>
<div class="paragraph">
<p>See also <a href="#native-plugin">NATIVE and EMBEDDED support moved to a separate artifact</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="support-ooremote-dropped"><a class="anchor" href="#support-ooremote-dropped"></a>8.5. Support for jdbc:firebirdsql:oo: (OpenOffice/LibreOffice driver) dropped</h3>
<div class="paragraph">
<p>The OOREMOTE protocol (JDBC URL prefix <code>jdbc:firebird[sql]:oo:</code>) has been removed in Jaybird 6.</p>
</div>
<div class="paragraph">
<p>The recommended replacement is to use LibreOffice and the builtin &#8220;Firebird External&#8221; connection option in LibreOffice Base, instead of the &#8220;JDBC&#8221; option with Jaybird on the classpath of LibreOffice.</p>
</div>
</div>
<div class="sect2">
<h3 id="removed-prop-timestampuseslocaltmezone"><a class="anchor" href="#removed-prop-timestampuseslocaltmezone"></a>8.6. Removed connection property timestampUsesLocalTimezone</h3>
<div class="paragraph">
<p>The connection property <code>timestampUsesLocalTimezone</code> has been removed.
The exact semantics and usage of this property were unclear.
It was previously deprecated in Jaybird 5 for removal in Jaybird 6 or later.</p>
</div>
<div class="paragraph">
<p>Other code associated with this property was also removed.</p>
</div>
</div>
<div class="sect2">
<h3 id="client-info-compat"><a class="anchor" href="#client-info-compat"></a>8.7. Differences in client info property behavior</h3>
<div class="paragraph">
<p>The <a href="#client-info">rewritten client info properties implementation</a> may result in the following incompatibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>setClientInfo(Properties)</code> will now clear all known properties of <code>USER_SESSION</code> and&#8201;&#8212;&#8201;if not in auto-commit&#8201;&#8212;&#8201;<code>USER_TRANSACTION</code> which are not included in the <code>Properties</code> object;
Jaybird 5 and earlier only set properties listed in the <code>Properties</code> object.
The recommended approach is to use <code>getClientInfo()</code>, modify the returned <code>Properties</code> object (update values, add new properties, and remove properties which should be cleared), and call <code>setClientInfo(Properties)</code> with that object.</p>
</li>
<li>
<p>Initially, a connection only knows the properties <code>ApplicationName</code>, <code>ClientUser</code> and <code>ClientHostname</code>.
Other properties are registered <em>for the current connection</em> when getting or setting properties.</p>
</li>
<li>
<p><code>getClientInfo(String)</code> with a name without context will now always return the value from <code>USER_SESSION</code>;
Jaybird 5 and earlier returned the value in <code>USER_TRANSACTION</code> and fell back to <code>USER_SESSION</code> if the property did not exist in <code>USER_TRANSACTION</code>.
To get the value from <code>USER_TRANSACTION</code>, use <code>&lt;name&gt;@USER_TRANSACTION</code>.</p>
</li>
<li>
<p>If the property <code>ApplicationName</code> in <code>USER_SESSION</code> has no value, it falls back to <code>CLIENT_PROCESS</code> in <code>SYSTEM</code> (which reports the value of the <code>processName</code> connection property);
Jaybird 5 and earlier reported <code>null</code> without falling back.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also <a href="#client-info">Rewritten client info properties support</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-aware-type-compat"><a class="anchor" href="#operation-aware-type-compat"></a>8.8. New Operation.Type value for async fetch</h3>
<div class="paragraph">
<p>With the introduction of async fetch, the <code>org.firebirdsql.gds.ng.monitor.Operation.Type</code> enum has two new values added:</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
<code>STATEMENT_ASYNC_FETCH_START</code>
</td>
<td class="hdlist2">
<p>Start of async fetch.
Covers sending of the fetch request.
This operation is cancellable.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>STATEMENT_ASYNC_FETCH_COMPLETE</code>
</td>
<td class="hdlist2">
<p>Completion of async fetch.
Covers processing the responses of the fetch request.
This operation is not cancellable.
Attempts to cancel this operation will throw an exception.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you&#8217;re currently using the <code>OperationAware</code> interface to monitor and/or cancel fetches, make sure to also process <code>STATEMENT_ASYNC_FETCH_START</code> and/or <code>STATEMENT_ASYNC_FETCH_COMPLETE</code> as appropriate.</p>
</div>
</div>
<div class="sect2">
<h3 id="datetime-conversion-changes"><a class="anchor" href="#datetime-conversion-changes"></a>8.9. Changes in datetime conversions</h3>
<div class="paragraph">
<p>The conversions of datetime values were overhauled to use the <code>java.time</code> types wherever possible.</p>
</div>
<div class="paragraph">
<p>This results in some minor differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getString(&#8230;&#8203;)</code> on a <code>TIME</code> field will now render fractional seconds if available</p>
</li>
<li>
<p><code>setString(&#8230;&#8203;)</code> on a <code>TIME</code> field now has seconds optional and accepts fractional seconds</p>
</li>
<li>
<p><code>setTime(&#8230;&#8203;)</code> on a <code>TIME</code> field will not set sub-second values (previously this could vary with the millisecond value wrapped by <code>java.sql.Time</code>)</p>
</li>
<li>
<p><code>getString(&#8230;&#8203;)</code> on a <code>TIMESTAMP</code> field will now render without <code>.0</code> at the end if the value does not have fractional seconds (e.g. <code>2023-07-22 12:43:45</code> instead of <code>2023-07-22 12:43:45.0</code>)</p>
</li>
<li>
<p><code>setString(&#8230;&#8203;)</code> on a <code>TIMESTAMP</code> field now has seconds optional</p>
</li>
<li>
<p><code>setString(&#8230;&#8203;)</code> on a <code>TIMESTAMP</code> field now also accepts ISO 8601 datetime strings (that is, with a <code>T</code> as a separator instead of a space, for example, <code>2023-07-22 12:43:45</code> and <code>2023-07-22T12:43:45</code> are now both accepted)</p>
</li>
<li>
<p><code>setDate(&#8230;&#8203;)</code> on a <code>TIMESTAMP</code> field now sets time to 00:00:00 (previously this could vary with the millisecond value wrapped by <code>java.sql.Date</code>)</p>
</li>
<li>
<p><code>setTime(&#8230;&#8203;)</code> on a <code>TIMESTAMP</code> field will now always set at 1970-01-01, and will not set sub-second values (previously this could vary with the millisecond value wrapped by <code>java.sql.Time</code>)</p>
</li>
<li>
<p><code>setTimestamp(&#8230;&#8203;)</code> on a <code>CHAR</code>/<code>VARCHAR</code>/<code>BLOB SUB_TYPE TEXT</code> field will now set the value without <code>.0</code> at the end if the value does not have fractional seconds (e.g. <code>2023-07-22 12:43:45</code> instead of <code>2023-07-22 12:43:45.0</code>)</p>
</li>
<li>
<p><code>getTimestamp(&#8230;&#8203;)</code> on a <code>CHAR</code>/<code>VARCHAR</code>/<code>BLOB SUB_TYPE TEXT</code> field will now also parse ISO 8601 datetime strings (that is, with a <code>T</code> as a separator instead of a space, for example, <code>2023-07-22 12:43:45</code> and <code>2023-07-22T12:43:45</code> are now both accepted), and seconds are now optional</p>
</li>
<li>
<p><code>getTime(&#8230;&#8203;)</code> on a <code>CHAR</code>/<code>VARCHAR</code>/<code>BLOB SUB_TYPE TEXT</code> field will now parse values without seconds and values with fractional seconds.
Though it can parse it, the resulting value will not include fractional seconds.</p>
</li>
<li>
<p><code>setDate(&#8230;&#8203;, Calendar)</code> on a <code>CHAR</code>/<code>VARCHAR</code>/<code>BLOB SUB_TYPE TEXT</code> field will now use the <code>Calendar</code> to rebase the date, this can result in an off-by-one difference in the date compared to previous versions (depending on the time zone set on the <code>Calendar</code>)</p>
</li>
<li>
<p><code>getDate(&#8230;&#8203;, Calendar)</code> on a <code>CHAR</code>/<code>VARCHAR</code>/<code>BLOB SUB_TYPE TEXT</code> field will now use the <code>Calendar</code> to rebase the date, this can result in an off-by-one difference in the date compared to previous versions (depending on the time zone set on the <code>Calendar</code>)</p>
</li>
<li>
<p>The <code>TypeConversionException</code> thrown by <code>getDate(&#8230;&#8203;)</code>, <code>getTime(&#8230;&#8203;)</code> and <code>getTimestamp(&#8230;&#8203;)</code> on unsupported types may now report <code>java.time.LocalDate</code>, <code>java.time.LocalTime</code> or <code>java.time.LocalDateTime</code> as the type in its error message instead of <code>java.sql.Date</code>, <code>java.sql.Time</code>, or <code>java.sql.Timestamp</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="compat-allow-tx-stmts"><a class="anchor" href="#compat-allow-tx-stmts"></a>8.10. Execution of <code>COMMIT</code> and <code>ROLLBACK</code> rejected by default</h3>
<div class="paragraph">
<p>Attempts to prepare or execute <code>COMMIT</code> or <code>ROLLBACK</code> (without <code>RETAIN</code> or a savepoint) will now fail by default.
In previous versions, executing these statements would work, but leave the connection in an unusable state.
The exact error will&#8201;&#8212;&#8201;generally&#8201;&#8212;&#8201;be one of the following:</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
<code>337248313</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Execution of COMMIT statement is not allowed, use Connection.commit(), or set connection property allowTxStmts to true</em>&#8221;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>337248314</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Execution of ROLLBACK statement is not allowed, use Connection.rollback(), or set connection property allowTxStmts to true</em>&#8221;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>337248319</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Using addBatch with a transaction management statement is not supported</em>&#8221;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>337248320</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Using prepareCall with a transaction management statement is not supported</em>&#8221;</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the case of the <code>execute</code>, <code>executeUpdate</code> or <code>executeLargeUpdate</code> methods of <code>Statement</code>, or the <code>prepareStatement</code> methods of <code>Connection</code>, this can be resolved by allowing the execution with connection property <code>allowTxStmts</code> set to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>In the case of <code>Statement.executeQuery(String)</code> and <code>PreparedStatement.executeQuery()</code>, you will need to switch to using one of the other <code>execute</code>, <code>executeUpdate</code> or <code>executeLargeUpdate</code> methods.</p>
</div>
<div class="paragraph">
<p>It is not possible to use the <code>prepareCall</code> methods of <code>Connection</code> with these statements.
In previous versions of Jaybird, subsequent execution wouldn&#8217;t work either&#8201;&#8212;&#8201;or attempt to execute stored procedures called <code>COMMIT</code> or <code>ROLLBACK</code>, but it is now rejected early in the <code>prepareCall</code> methods of <code>Connection</code>.
Switch to using <code>prepareStatement</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, using <code>Statement.addBatch(String)</code> and <code>PreparedStatement.addBatch()</code> will not work with these statements.
Switch to using one of the normal execute methods.</p>
</div>
<div class="paragraph">
<p>See also <a href="#allow-tx-stmts">Support for executing transaction management statements</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="compat-rs-fw-only-holdable"><a class="anchor" href="#compat-rs-fw-only-holdable"></a>8.11. Forward-only holdable result sets no longer upgraded to scroll-insensitive</h3>
<div class="paragraph">
<p>Jaybird no longer upgrades <code>TYPE_FORWARD_ONLY</code> holdable result sets to <code>TYPE_SCROLL_INSENSITIVE</code>.
As a result, for these result sets, only the <code>next()</code> navigation method is allowed, and other navigation methods will throw an <code>SQLException</code>, just like a forward-only non-holdable result set.</p>
</div>
<div class="paragraph">
<p>In previous versions, this upgrade occurred when creating a <code>TYPE_FORWARD_ONLY</code> result set, either explicitly when asking for holdability <code>HOLD_CURSORS_OVER_COMMIT</code>, or implicitly when <code>defaultResultsetHoldable=true</code> (or <code>defaultHoldable=true</code> or <code>result_set_holdable=true</code>) was set and no holdability was specified for the statement itself.</p>
</div>
<div class="paragraph">
<p>If you relied on this type upgrade to access navigation methods other than <code>next()</code>, you will need to explicitly ask for a <code>TYPE_SCROLL_INSENSITIVE</code> result set.</p>
</div>
</div>
<div class="sect2">
<h3 id="compat-read-only"><a class="anchor" href="#compat-read-only"></a>8.12. Read-only behaviour of connections</h3>
<div class="paragraph">
<p>In previous versions of Jaybird the read-only state of a connection was not retained if the transaction parameter buffer was replaced, for example by calls to <code>setTransactionIsolation(int)</code>.</p>
</div>
<div class="paragraph">
<p>Now this has been corrected, it is possible that your code unexpectedly throws an exception with message &#8220;<em>attempted update during read-only transaction [SQLState:25006, ISC error code:335544361]</em>&#8221; (error <code>isc_read_only_trans</code>).</p>
</div>
<div class="paragraph">
<p>You need to make sure to call <code>setReadOnly(false)</code> if the connection was previously marked read-only.
If you&#8217;re using a connection pool, you need to ensure it properly resets the read-only state of the connection when checking in or checking out the connection.
For example, both Apache DBCP and Apache Tomcat connection pools requires the <code>defaultReadOnly</code> property to be set (i.e. to <code>false</code>), otherwise it will not reset the read-only state.</p>
</div>
<div class="paragraph">
<p>If overridden transaction mappings are used, and the default isolation level has <code>isc_tpb_read</code>, the connection will be marked as read-only.
As a result, switching isolation levels will now also result in read-only transactions, even if the mapping of the other isolation level is defined with <code>isc_tpb_write</code>.
You will need to explicitly call <code>setReadOnly(false)</code>, or&#8201;&#8212;&#8201;better yet&#8201;&#8212;&#8201;do not override transaction mappings with a <code>isc_tpb_read</code>, but always use <code>isc_tpb_write</code>, and control read-only state only through <code>setReadOnly</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="compat-no-close-after-last"><a class="anchor" href="#compat-no-close-after-last"></a>8.13. <code>ResultSet</code> in auto-commit no longer closed after last row</h3>
<div class="paragraph">
<p>For more information, see <a href="#no-close-after-last"><code>ResultSet</code> in auto-commit no longer closed after last row</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="compat-scroll-rs-update-behavior"><a class="anchor" href="#compat-scroll-rs-update-behavior"></a>8.14. Behavioural changes for updatable scrollable <code>ResultSet</code></h3>
<div class="paragraph">
<p>For more information, see <a href="#scroll-rs-update-behavior">Changes to behaviour of updatable scrollable result sets</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="compat-modular"><a class="anchor" href="#compat-modular"></a>8.15. Some packages not accessible when Jaybird is on the modulepath</h3>
<div class="paragraph">
<p>Due to modularization, the following packages are no longer accessible when Jaybird is used from the modulepath:</p>
</div>
<div class="sect3">
<h4 id="_jaybird_dependency"><a class="anchor" href="#_jaybird_dependency"></a>8.15.1. <code>jaybird</code> dependency</h4>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.gds.ng.dbcrypt.simple</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.tz</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.auth.legacy</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.auth.srp</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.crypt.arc4</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.crypt.chacha</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.version<em>NN</em></code> (with <em>NN</em>, is <code>10</code>, <code>11</code>, <code>12</code>, <code>13</code>, <code>15</code>, <code>16</code> and <code>18</code>)</p>
</li>
<li>
<p><code>org.firebirdsql.jaybird</code></p>
</li>
<li>
<p><code>org.firebirdsql.jaybird.parser</code></p>
</li>
<li>
<p><code>org.firebirdsql.jaybird.props.internal</code></p>
</li>
<li>
<p><code>org.firebirdsql.jaybird.util</code></p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.escape</code></p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.meta</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_jaybird_native_dependency"><a class="anchor" href="#_jaybird_native_dependency"></a>8.15.2. <code>jaybird-native</code> dependency</h4>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.gds.impl.jni</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.jna</code></p>
</li>
<li>
<p><code>org.firebirdsql.jna.embedded</code></p>
</li>
<li>
<p><code>org.firebirdsql.jna.fbclient</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removal-of-classes-packages-and-methods-without-deprecation"><a class="anchor" href="#removal-of-classes-packages-and-methods-without-deprecation"></a>8.16. Removal of classes, packages and methods without deprecation</h3>
<div class="paragraph">
<p>Below list of removals may look daunting, but if you use Jaybird only as a JDBC driver, through the JDBC API, you&#8217;re likely unaffected.
Although we list them as removed without deprecation, some were marked as deprecated retroactively in Jaybird 5.0.3 or later.</p>
</div>
<div class="paragraph">
<p>This section does not include all changes to packages or classes considered internal API.</p>
</div>
<div class="sect3">
<h4 id="removal-of-packages-without-deprecation"><a class="anchor" href="#removal-of-packages-without-deprecation"></a>8.16.1. Removal of packages without deprecation</h4>
<div class="paragraph">
<p>The following packages have been removed in Jaybird 6 without deprecation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.logging</code>;
there is no replacement</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-methods-without-deprecation"><a class="anchor" href="#removal-of-methods-without-deprecation"></a>8.16.2. Removal of methods without deprecation</h4>
<div class="paragraph">
<p>The following methods have been removed in Jaybird 6 without deprecation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FBConnection</code></p>
<div class="ulist">
<ul>
<li>
<p><code>prepareMetaDataStatement(String, int, int)</code>;
use <code>prepareStatement(String, int, int, int, boolean, boolean)</code></p>
</li>
<li>
<p><code>getStatementListener()</code>;
there is no replacement</p>
</li>
<li>
<p><code>inTransaction()</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>JaybirdSystemProperties</code></p>
<div class="ulist">
<ul>
<li>
<p><code>isForceConsoleLogger()</code>;
there is no replacement</p>
</li>
<li>
<p><code>isDisableLogging()</code>;
there is no replacement</p>
</li>
<li>
<p><code>getLoggerImplementation()</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBCallableStatement</code></p>
<div class="ulist">
<ul>
<li>
<p><code>findOutParameter(String)</code> (protected);
use <code>getAndAssertSingletonResultSet().findColumn(paramName)</code>;
carefully check if that is the correct usage (the method was removed because the old usage within Jaybird resulted in mapping the wrong column)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBProcedureCall</code></p>
<div class="ulist">
<ul>
<li>
<p><code>mapOutParamIndexToPosition(int, boolean)</code>;
use <code>mapOutParamIndexToPosition(int)</code> (equivalent to passing <code>true</code>), there is no replacement for the <code>false</code> behaviour</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-classes-without-deprecation"><a class="anchor" href="#removal-of-classes-without-deprecation"></a>8.16.3. Removal of classes without deprecation</h4>
<div class="paragraph">
<p>The following classes have been removed in Jaybird 6 without deprecation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FbLocalDatabaseFactory</code>&#8201;&#8212;&#8201;unused since removal of LOCAL protocol implementation in Jaybird 5.</p>
</li>
<li>
<p><code>DatatypeCoder.RawDateTimeStruct</code> (semi-internal API)&#8201;&#8212;&#8201;use one of the <code>java.time</code> types (<code>LocalDateTime</code>, <code>LocalDate</code> or <code>LocalTime</code>).
Though this class was publicly accessible through <code>ResultSet.getObject/updateObject</code> and <code>PreparedStatement.setObject</code>, it is internal API, and we expect it is unlikely to be actually used in user code.</p>
</li>
<li>
<p><code>FBDriverConsistencyCheckException</code>&#8201;&#8212;&#8201;unused since the changes to client info properties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following classes are no longer accessible in Jaybird 6:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RowValueBuilder</code> is now package private</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following classes are no longer extensible in Jaybird 6 as they are now <code>sealed</code> or <code>final</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FBPooledConnection</code></p>
<div class="ulist">
<ul>
<li>
<p>Visibility was also reduced to package-private</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBXAConnection</code></p>
<div class="ulist">
<ul>
<li>
<p>Visibility was also reduced to package-private</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>PooledConnectionHandler</code></p>
<div class="ulist">
<ul>
<li>
<p>Class was already package-private</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>XAConnectionHandler</code></p>
<div class="ulist">
<ul>
<li>
<p>Visibility was also reduced to package-private</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StoredProcedureMetaDataFactory</code></p>
<div class="ulist">
<ul>
<li>
<p>Visibility was also reduced to package-private</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-constants-without-deprecation"><a class="anchor" href="#removal-of-constants-without-deprecation"></a>8.16.4. Removal of constants without deprecation</h4>
<div class="paragraph">
<p>The following constants have been removed in Jaybird 6 without deprecation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>JaybirdSystemProperties</code></p>
<div class="ulist">
<ul>
<li>
<p><code>FORCE_CONSOLE_LOGGER_PROP</code>;
there is no replacement</p>
</li>
<li>
<p><code>DISABLE_LOGGING_PROP</code>;
there is no replacement</p>
</li>
<li>
<p><code>LOGGER_IMPLEMENTATION_PROP</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>SQLStateConstants</code></p>
<div class="ulist">
<ul>
<li>
<p><code>SQL_STATE_INVALID_CONN_ATTR</code> (<code>01S00</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
<li>
<p><code>SQL_STATE_INVALID_COLUMN</code> (<code>HY002</code>);
replaced by <code>SQL_STATE_INVALID_DESC_FIELD_ID</code> (<code>HY091</code>)</p>
</li>
<li>
<p><code>SQL_STATE_INVALID_ARG_VALUE</code> (<code>HY009</code>);
used with wrong meaning, replaced by multiple other constants (<code>SQL_STATE_INVALID_USE_NULL</code> (<code>HY009</code>, same value), <code>SQL_STATE_ATT_CANNOT_SET_NOW</code> (<code>HY011</code>) , <code>SQL_STATE_INVALID_ATTR_VALUE</code> (<code>HY024</code>), <code>SQL_STATE_INVALID_STRING_LENGTH</code> (<code>HY090</code>))</p>
</li>
<li>
<p><code>SQL_STATE_INVALID_TRANSACTION_STATE</code> (<code>25S01</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
<li>
<p><code>SQL_STATE_TRANSACTION_ACTIVE</code> (<code>25S02</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
<li>
<p><code>SQL_STATE_TRANSACTION_ROLLED_BACK</code> (<code>25S03</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
<li>
<p><code>SQL_STATE_CONNECTION_FAILURE_IN_TX</code> (<code>08007</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
<li>
<p><code>SQL_STATE_COMM_LINK_FAILURE</code> (<code>08S01</code>)&#8201;&#8212;&#8201;it was unused;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBProcedureCall</code></p>
<div class="ulist">
<ul>
<li>
<p><code>OLD_CALLABLE_STATEMENT_COMPATIBILITY</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removal-of-deprecated-classes-packages-and-methods"><a class="anchor" href="#removal-of-deprecated-classes-packages-and-methods"></a>8.17. Removal of deprecated classes, packages and methods</h3>
<div class="paragraph">
<p>Below list of removals may look daunting, but if you use Jaybird only as a JDBC driver, through the JDBC API, you&#8217;re likely unaffected.</p>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-packages"><a class="anchor" href="#removal-of-deprecated-packages"></a>8.17.1. Removal of deprecated packages</h4>
<div class="paragraph">
<p>The following packages have been removed in Jaybird 6:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.gds.impl.oo</code></p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.oo</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-methods"><a class="anchor" href="#removal-of-deprecated-methods"></a>8.17.2. Removal of deprecated methods</h4>
<div class="paragraph">
<p>The following methods have been removed in Jaybird 6:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FirebirdConnectionProperties</code><br>
Changes to the <code>FirebirdConnectionProperties</code> interface affect the data source implementations in <code>org.firebirdsql.ds</code>, and <code>FBManagedConnectionFactory</code>.</p>
<div class="ulist">
<ul>
<li>
<p><code>getDatabase()</code> and all its implementations;
use <code>DatabaseConnectionProperties.getDatabaseName()</code></p>
</li>
<li>
<p><code>setDatabase(String)</code> and all its implementations;
use <code>DatabaseConnectionProperties.setDatabaseName(String)</code></p>
</li>
<li>
<p><code>getNonStandardProperty(String)</code> and all its implementations;
use <code>BaseProperties.getProperty(String)</code></p>
</li>
<li>
<p><code>setNonStandardProperty(String,String)</code> and all its implementations;
use <code>BaseProperties.setProperty(String,String)</code></p>
</li>
<li>
<p><code>getBuffersNumber</code> and all its implementations;
use <code>DatabaseConnectionProperties.getPageCacheSize</code></p>
</li>
<li>
<p><code>setBuffersNumber</code> and all its implementations;
use <code>DatabaseConnectionProperties.setPageCacheSize</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>IConnectionProperties</code></p>
<div class="ulist">
<ul>
<li>
<p><code>short getConnectionDialect()</code> and all its implementations;
use <code>int DatabaseConnectionProperties.getSqlDialect()</code></p>
</li>
<li>
<p><code>setConnectionDialect(short)</code>, and all its implementations;
use <code>DatabaseConnectionProperties.setSqlDialect(int)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBSimpleDataSource.get/setBlobBufferLength</code>;
use <code>get/setBlobBufferSize</code></p>
</li>
<li>
<p><code>EventManager</code></p>
<div class="ulist">
<ul>
<li>
<p><code>get/setHost</code>;
use <code>get/setServerName</code></p>
</li>
<li>
<p><code>get/setPort</code>;
use <code>get/setPortNumber</code></p>
</li>
<li>
<p><code>get/setDatabase</code>;
use <code>get/setDatabaseName</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>GDSFactory.getJdbcUrl(GDSType, String)</code>;
use <code>GDSFactory.getJdbcUrl(GDSType, DatabaseConnectionProperties)</code></p>
</li>
<li>
<p><code>FBManagedConnection.getDatabase()</code>;
there is no direct replacement, but the information can be obtained from the connection properties</p>
</li>
<li>
<p><code>GDSHelper.getIscEncoding()</code>;
there is no replacement</p>
</li>
<li>
<p><code>FirebirdConnection.getIscEncoding</code>;
there is no replacement</p>
</li>
<li>
<p><code>FBBlob</code></p>
<div class="ulist">
<ul>
<li>
<p>constructors <code>FBBlob(GDSHelper)</code> and <code>FBBlob(GDSHelper, FBObjectListener.BlobListener)</code>;
use <code>FBBlob(GDSHelper, FBObjectListener.BlobListener, Config)</code></p>
</li>
<li>
<p>constructors <code>FBBlob(GDSHelper c, long blobId)</code> and <code>FBBlob(GDSHelper c, long blobId, FBObjectListener.BlobListener blobListener)</code>;
use <code>FBBlob(GDSHelper, long, FBObjectListener.BlobListener, Config)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>DatabaseConnectionProperties</code></p>
<div class="ulist">
<ul>
<li>
<p><code>isTimestampUsesLocalTimezone</code>/<code>setTimestampUsesLocalTimezone(boolean)</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBSQLException</code></p>
<div class="ulist">
<ul>
<li>
<p>constructor <code>FBSQLException(String, SQLException)</code>;
use <code>FBSQLException(String)</code> or <code>FBSQLException(String, String)</code> followed by <code>setNextException(SQLException)</code></p>
</li>
<li>
<p><code>getInternalException()</code>;
use <code>getCause()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBServiceManager</code></p>
<div class="ulist">
<ul>
<li>
<p><code>executeServicesOperation(ServiceRequestBuffer)</code>;
use <code>executeServicesOperation(FbService, ServiceRequestBuffer)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FirebirdDriver</code> (and <code>FBDriver</code>)</p>
<div class="ulist">
<ul>
<li>
<p><code>newConnectionProperties()</code>&#8201;&#8212;&#8201;was not previously deprecated, see next method</p>
</li>
<li>
<p><code>connect(FirebirdConnectionProperties)</code>;
use <code>FBSimpleDataSource</code> for programmatic access to connection properties and connection creation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-classes"><a class="anchor" href="#removal-of-deprecated-classes"></a>8.17.3. Removal of deprecated classes</h4>
<div class="paragraph">
<p>The following classes have been removed in Jaybird 6:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.gds.ng.listeners.DefaultDatabaseListener</code>;
implementing <code>DatabaseListener</code> is now sufficient as all methods in the interface now have a default implementation that does nothing</p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.listeners.DefaultStatementListener</code>;
implementing <code>StatementListener</code> is now sufficient as all methods in the interface now have a default implementation that does nothing</p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.FBConnectionDefaults</code>;
its replacement, <code>org.firebirdsql.jaybird.props.PropertyConstants</code>, is considered internal API</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-constants"><a class="anchor" href="#removal-of-deprecated-constants"></a>8.17.4. Removal of deprecated constants</h4>
<div class="paragraph">
<p>The following constants have been removed in Jaybird 6:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All public String constants in <code>FBDriver</code>;
the replacement for most constants can be found in <code>org.firebirdsql.jaybird.props.PropertyNames</code>, though some will be removed without replacement</p>
</li>
<li>
<p><code>ISCConstants.isc_dpb_*</code> that are DPB items;
the replacement is the constant with the same name in <code>org.firebirdsql.jaybird.fb.constants.DpbItems</code></p>
</li>
<li>
<p><code>ISCConstants.isc_tpb_*</code> that are TPB items;
the replacement is the constant with the same name in <code>org.firebirdsql.jaybird.fb.constants.TpbItems</code></p>
</li>
<li>
<p><code>ISCConstants.isc_spb_*</code> that are SPB items;
the replacement is the constant with the same name in <code>org.firebirdsql.jaybird.fb.constants.SpbItems</code></p>
</li>
<li>
<p><code>ISCConstants.isc_bpb_*</code> that are BPB items;
the replacement is the constant with the same name in <code>org.firebirdsql.jaybird.fb.constants.BpbItems</code></p>
</li>
<li>
<p><code>ISCConstants.isc_bpb_type_segmented</code> and <code>ISCConstants.isc_bpb_type_stream</code>;
the replacement is the constant with the same name in <code>org.firebirdsql.jaybird.fb.constants.BpbItems.TypeValues</code></p>
</li>
<li>
<p>All constants in <code>DatabaseParameterBuffer</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.fb.constants.DpbItems</code></p>
</li>
<li>
<p>All constants in <code>TransactionParameterBuffer</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.fb.constants.TpbItems</code></p>
</li>
<li>
<p>All constants in <code>ServiceParameterBuffer</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.fb.constants.SpbItems</code></p>
</li>
<li>
<p>All constants in <code>BlobParameterBuffer</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.fb.constants.BpbItems</code> and <code>org.firebirdsql.jaybird.fb.constants.BpbItems.TypeValues</code></p>
</li>
<li>
<p>All <code>TPB_*</code> constants in <code>FirebirdConnection</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.fb.constants.TpbItems</code></p>
</li>
<li>
<p>All public String constants in <code>org.firebirdsql.jdbc.FBConnectionProperties</code>;
the replacement for most constants can be found in <code>org.firebirdsql.jaybird.props.PropertyNames</code>, though some will be removed without replacement</p>
</li>
<li>
<p><code>GDSHelper.DEFAULT_BLOB_BUFFER_SIZE</code>;
its replacement, <code>org.firebirdsql.jaybird.props.PropertyConstants.DEFAULT_BLOB_BUFFER_SIZE</code>, is considered internal API</p>
</li>
<li>
<p>All constants in <code>IConnectionProperties</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.props.PropertyConstants</code>, though this class is considered internal API</p>
</li>
<li>
<p>All constants in <code>IServiceProperties</code>;
use the equivalent constant from <code>org.firebirdsql.jaybird.props.PropertyConstants</code>, though this class is considered internal API</p>
</li>
<li>
<p><code>PropertyNames.timestampUsesLocalTimezone</code>;
there is no replacement</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="breaking-changes-internal-api"><a class="anchor" href="#breaking-changes-internal-api"></a>8.18. Breaking changes internal API</h3>
<div class="paragraph">
<p>The following breaking changes were made to the internal API, like the GDS-ng API in <code>org.firebirdsql.gds.ng</code> and sub-packages.
These changes are primarily interesting for implementers of custom GDS-ng implementations or forks of Jaybird, or people using these low-level APIs directly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only changes we think are relevant to driver implementers or (internal) API users are documented.
This means there may be undocumented changes to internal API.
If you are confronted with such a change, let us know on <a href="https://groups.google.com/g/firebird-java">firebird-java</a>, so we can take this into account when documenting future changes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FbWireDatabase</code></p>
<div class="ulist">
<ul>
<li>
<p><code>enqueueDeferredAction(DeferredAction)</code> now throws <code>SQLException</code> to be able to handle exceptions for sync actions if there are a lot of deferred packets</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FbWireOperations</code></p>
<div class="ulist">
<ul>
<li>
<p><code>enqueueDeferredAction(DeferredAction)</code> now throws <code>SQLException</code> (see also <code>FbWireDatabase</code> above)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>AbstractFbStatement</code></p>
<div class="ulist">
<ul>
<li>
<p><code>setCursorName(String)</code> is now final;
subclasses need to implement <code>setCursorNameImpl(String)</code> to provide the actual implementation.
These implementations do not need to take out the lock, nor notify the exception listener dispatcher, as that is already handled in the final <code>setCursorName(String)</code> method.</p>
</li>
<li>
<p>The most recent cursor name is now accessible with <code>protected String getCursorName()</code>.
Its value is reset to <code>null</code> on each prepare.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>AbstractFbWireStatement</code></p>
<div class="ulist">
<ul>
<li>
<p><code>close()</code> is now final</p>
</li>
<li>
<p><code>wrapDeferredResponse</code> received an extra parameter, <code>boolean requiresSync</code>.
This parameter signals if the deferred response requires some form of synchronization action to instruct the server to send the response.
When in doubt, use <code>false</code> to communicate that no such synchronization is required.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>JnaDatabase</code></p>
<div class="ulist">
<ul>
<li>
<p><code>getEncodingDefinition</code> was removed;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>DeferredAction</code></p>
<div class="ulist">
<ul>
<li>
<p><code>wrapDeferredResponse</code> received an extra parameter, <code>boolean requiresSync</code>.
This parameter signals if the deferred response requires some form of synchronization action to instruct the server to send the response.
When in doubt, use <code>false</code> to communicate that no such synchronization is required.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>AsynchronousChannelListener.Event</code> was converted to a record, so it is now final, and its getters (<code>getEventId()</code> and <code>getEventCount()</code>) have been replaced by accessor methods (<code>eventId()</code> and <code>eventCount()</code>)</p>
</li>
<li>
<p><code>DbAttachInfo</code> was converted to a record, so its getters (<code>getServerName()</code>, <code>getPortNumber()</code> and <code>getAttachObjectName()</code>) have been replaced by accessor methods (<code>serverName()</code>, <code>portNumber()</code>, <code>attachObjectName()</code>)</p>
</li>
<li>
<p><code>XdrInputStream</code></p>
<div class="ulist">
<ul>
<li>
<p><code>skipPadding</code> return type was changed to <code>void</code> as the return value is never used in Jaybird code</p>
</li>
<li>
<p><code>skipFully</code> was removed;
use standard Java <code>InputStream.skipNBytes</code> instead</p>
</li>
<li>
<p><code>readShort</code> was removed as it was unused</p>
</li>
</ul>
</div>
</li>
<li>
<p>The no-arg constructor of <code>FBXAException</code> was removed</p>
</li>
<li>
<p><code>FBResultSet</code></p>
<div class="ulist">
<ul>
<li>
<p><code>close(boolean)</code> was removed;
use <code>close(boolean, CompletionReason)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBProcedureCall</code> is no longer cloneable;
use <code>FBProcedureCall.copyOf(FBProcedureCall)</code></p>
</li>
<li>
<p><code>UnixCrypt</code> was replaced by <code>LegacyHash</code>, which only performs the password hash specific to Firebird legacy authentication</p>
</li>
<li>
<p><code>GDSFactoryPlugin.getDatabasePath(String, Integer, String)</code> and <code>getDatabasePath(String)</code> no longer throw <code>GDSException</code>, but instead throw <code>SQLException</code></p>
</li>
<li>
<p><code>GDSFactory.getDatabasePath(&#8230;&#8203;)</code> no longer throw <code>GDSException</code>, but instead throw <code>SQLException</code></p>
</li>
<li>
<p><code>GDSServerVersionException</code> no longer extends <code>GDSException</code>, but instead extends <code>SQLNonTransientException</code></p>
</li>
<li>
<p><code>GDSException</code> was significantly modified and deprecated for future removal.
Most of its implementation was removed, and it now extends <code>SQLException</code>.
Only the constructors <code>GDSException(int)</code>, <code>GDSException(int, Throwable)</code> and <code>GDSException(String)</code> were retained.
All other constructors and methods have been removed.</p>
</li>
<li>
<p><code>WireGDSFactoryPlugin</code>, <code>NativeGDSFactoryPlugin</code> and <code>EmbeddedGDSFactoryPlugin</code> are now final</p>
</li>
<li>
<p><code>FbEmbeddedDatabaseFactory</code> is now final</p>
</li>
<li>
<p><code>FbClientDatabaseFactory</code> and <code>FbEmbeddedDatabaseFactory</code> now have a private constructor;
use their static <code>getInstance()</code> method to obtain an instance</p>
</li>
<li>
<p><code>DefaultDatatypeCoder.intToBytes(int)</code> was removed;
use <code>encodeInt(int)</code></p>
</li>
<li>
<p><code>ChaChaEncryptionPlugin</code> and <code>ChaChaEncryptionPluginSpi</code> are now final</p>
</li>
<li>
<p><code>CryptSessionConfig</code>, the JavaBeans-style accessors have been replaced with record-style accessors:</p>
<div class="ulist">
<ul>
<li>
<p><code>getEncryptionIdentifier()</code> &#8594; <code>encryptionIdentifier()</code></p>
</li>
<li>
<p><code>getEncryptKey()</code> &#8594; <code>encryptKey()</code></p>
</li>
<li>
<p><code>getDecryptKey()</code> &#8594; <code>decryptKey()</code></p>
</li>
<li>
<p><code>getSpecificData()</code> &#8594; <code>specificData()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>EncryptionIdentifier</code>, some JavaBeans-style accessors have been replaced with record-style accessors:</p>
<div class="ulist">
<ul>
<li>
<p><code>getType()</code> &#8594; <code>type()</code></p>
</li>
<li>
<p><code>getPluginName()</code> &#8594; <code>pluginName()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>KnownServerKey.PluginSpecificData</code>, the JavaBeans-style accessors have been replaced with record-style accessors:</p>
<div class="ulist">
<ul>
<li>
<p><code>getEncryptionIdentifier()</code> &#8594; <code>encryptionIdentifier()</code></p>
</li>
<li>
<p><code>getSpecificData()</code> &#8594; <code>specificData()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>EncryptionPlugin</code> and <code>EncryptionPluginSpi</code>, the JavaBeans-style accessor has been replaced with a record-style accessor:</p>
<div class="ulist">
<ul>
<li>
<p><code>getEncryptionIdentifier()</code> &#8594; <code>encryptionIdentifier()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StringArgument</code></p>
<div class="ulist">
<ul>
<li>
<p>constructor <code>StringArgument(int, ArgumentType, String)</code>;
use <code>StringArgument(int, ArgumentType, String, Encoding)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBConnection</code></p>
<div class="ulist">
<ul>
<li>
<p><code>checkClientInfoSupport()</code> was removed;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>IEncodingFactory</code></p>
<div class="ulist">
<ul>
<li>
<p><code>&lt;T extends DatatypeCoder&gt; T getOrCreateDatatypeCoder(Class&lt;T&gt;)</code> was removed;
its replacements is <code>&lt;T extends DatatypeCoder&gt; T getOrCreateDatatypeCoder(Class&lt;T&gt;, Function&lt;IEncodingFactory, T&gt;)</code> where the function is a factory for the desired <code>DatatypeCoder</code> instance if it doesn&#8217;t already exist.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The following classes in <code>org.firebirdsql.util</code> were moved to <code>org.firebirdsql.jaybird.util</code>.
This package is internal API only, and not exported from the module.</p>
<div class="ulist">
<ul>
<li>
<p><code>ByteArrayHelper</code></p>
</li>
<li>
<p><code>ExceptionHelper</code></p>
</li>
<li>
<p><code>IOUtils</code></p>
</li>
<li>
<p><code>Primitives</code></p>
</li>
<li>
<p><code>ReflectionHelper</code></p>
</li>
<li>
<p><code>SQLExceptionChainBuilder</code></p>
</li>
<li>
<p><code>StringUtils</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>DbMetadataMediator</code> was moved to package <code>org.firebirdsql.jdbc</code> for module accessibility reasons.</p>
</li>
<li>
<p><code>DatatypeCoder</code></p>
<div class="ulist">
<ul>
<li>
<p><code>encodeTimestamp(Timestamp, Calendar, boolean)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>decodeTimestamp(Timestamp, Calendar, boolean)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>encodeTimestampCalendar(Timestamp, Calendar)</code> was removed;
use <code>encodeLocalDateTime(LocalDateTime)</code></p>
</li>
<li>
<p><code>decodeTimestampCalendar(byte[], Calendar)</code> was removed;
use <code>decodeLocalDateTime(byte[])</code></p>
</li>
<li>
<p><code>encodeTimestampRaw(DatatypeCoder.RawDateTimeStruct)</code> was removed;
use <code>encodeLocalDateTime(LocalDateTime)</code></p>
</li>
<li>
<p><code>decodeTimestampRaw(byte[])</code> was removed;
use <code>decodeLocalDateTime(byte[])</code></p>
</li>
<li>
<p><code>encodeTime(Time, Calendar, boolean)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>decodeTime(Time, Calendar, boolean)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>encodeTimeCalendar(Time, Calendar)</code> was removed;
use <code>encodeLocalTime(LocalTime)</code></p>
</li>
<li>
<p><code>decodeTimeCalendar(byte[], Calendar)</code> was removed;
use <code>decodeLocalTime(byte[])</code></p>
</li>
<li>
<p><code>encodeTimeRaw(DatatypeCoder.RawDateTimeStruct)</code> was removed;
use <code>encodeLocalTime(LocalTime)</code></p>
</li>
<li>
<p><code>decodeTimeRaw(byte[])</code> was removed;
use <code>decodeLocalTime(byte[])</code></p>
</li>
<li>
<p><code>encodeDate(Date, Calendar)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>decodeDate(Date, Calendar)</code> was removed;
there is no replacement</p>
</li>
<li>
<p><code>encodeDateCalendar(Date, Calendar)</code> was removed;
use <code>encodeLocalDate(LocalDate)</code></p>
</li>
<li>
<p><code>decodeDateCalendar(byte[], Calendar)</code> was removed;
use <code>decodeLocalDate(byte[])</code></p>
</li>
<li>
<p><code>encodeDateRaw(DatatypeCoder.RawDateTimeStruct)</code> was removed;
use <code>encodeLocalDate(LocalDate)</code></p>
</li>
<li>
<p><code>decodeDateRaw(byte[])</code> was removed;
use <code>decodeLocalDate(byte[])</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FetchResponse</code> was converted to a record, and its getters (<code>getStatus()</code> and <code>getCount()</code>) have been replaced by accessor methods (<code>status()</code> and <code>count()</code>)</p>
</li>
<li>
<p><code>GenericResponse</code> was converted to a record, and its getters (<code>getObjectHandle()</code>, <code>getBlobId()</code>, <code>getData()</code> and <code>exception()</code>) have been replaced by accessor methods (<code>objectHandle()</code>, <code>blobId()</code>, <code>data()</code> and <code>exception()</code>)</p>
</li>
<li>
<p><code>SQLResponse</code> was converted to a record, and its getter (<code>getCount()</code>) has been replaced by an accessor method (<code>count()</code>)</p>
</li>
<li>
<p><code>SQLExceptionChainBuilder</code></p>
<div class="ulist">
<ul>
<li>
<p>Moved to package <code>org.firebirdsql.jaybird.util</code>;
this package is internal API only, and not exported from the module (see also earlier)</p>
</li>
<li>
<p>The generics <code>&lt;E extends SQLException&gt;</code> were removed from this class</p>
<div class="ulist">
<ul>
<li>
<p><code>append</code> and <code>addFirst</code> now always expect <code>SQLException</code></p>
</li>
<li>
<p><code>getException()</code> now always returns <code>SQLException</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Constructor <code>SQLExceptionChainBuilder(SQLException)</code> was removed, as in practice this was never used;
replacement is <code>new SQLExceptionChainBuilder().append(exception)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBTpb</code> was removed, and its usages were replaced with <code>TransactionParameterBuffer</code></p>
</li>
<li>
<p><code>FBTpbMapper</code> no longer implements <code>Cloneable</code>, use <code>FBTpbMapper.copyOf(FBTpbMapper)</code> instead</p>
</li>
<li>
<p><code>ParameterBuffer</code> now extends <code>Serializable</code>, as all implementations are serializable, and some usages expect serializable behaviour even when the interfaces were used (though in practice, these objects are hardly ever serialized)</p>
</li>
<li>
<p><code>FBManagedConnection</code></p>
<div class="ulist">
<ul>
<li>
<p><code>setReadOnly(boolean)</code> was renamed to <code>setTpbReadOnly(boolean)</code> to reflect what it actually does</p>
</li>
<li>
<p><code>isReadOnly()</code> was renamed to <code>isTpbReadOnly()</code> to reflect what it actually does</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBObjectListener.FetcherListener</code></p>
<div class="ulist">
<ul>
<li>
<p><code>fetcherClosed(FBFetcher)</code> was removed</p>
</li>
<li>
<p><code>allRowsFetched(FBFetcher)</code> was removed</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FBObjectListener.ResultSetListener</code></p>
<div class="ulist">
<ul>
<li>
<p><code>allRowsFetched(ResultSet)</code> was removed</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>GDSExceptionHelper</code> and its nested class <code>GDSMessage</code></p>
<div class="ulist">
<ul>
<li>
<p>Replacement is the class <code>MessageTemplate</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>/isc_error_msg.properties</code> and <code>/isc_error_sqlstates.properties</code> resources have been removed.
Their replacements are the <code>/org/firebirdsql/firebird_N_error_msg.properties</code> and <code>/org/firebirdsql/firebird_N_sql_states.properties</code> resources, where <em>N</em> is the facility code of the error.
This allows us to avoid loading messages from facilities which are not actually used.</p>
</div>
<div class="sect3">
<h4 id="breaking-changes-internal-api-6-0-1"><a class="anchor" href="#breaking-changes-internal-api-6-0-1"></a>8.18.1. Breaking changes internal API for 6.0.1</h4>
<div class="paragraph">
<p>Bug fixes in Jaybird 6.0.1 introduced the following breaking changes in the GDS-ng API and its implementations.
As this is an internal API, our policy allows breaking changes in point releases.
This should only affect maintainers of Jaybird forks, or people using the internal API directly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FbDatabase</code></p>
<div class="ulist">
<ul>
<li>
<p><code>createInputBlob</code> and <code>createOutputBlob</code> now throw <code>SQLException</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>ProtocolDescriptor</code></p>
<div class="ulist">
<ul>
<li>
<p><code>createInputBlob</code> and <code>createOutputBlob</code> now throw <code>SQLException</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>AbstractFbWireBlob</code> and subclasses</p>
<div class="ulist">
<ul>
<li>
<p>Constructors now throw <code>SQLException</code> if the provided database is null or not attached, or the provided transaction is null or not active.
Previously, passing in a null transaction would result in a <code>NullPointerException</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="breaking-changes-unlikely"><a class="anchor" href="#breaking-changes-unlikely"></a>8.19. Unlikely breaking changes</h3>
<div class="paragraph">
<p>The following changes might cause issues, though we think this is unlikely:</p>
</div>
<div class="sect3">
<h4 id="breaking-finalization"><a class="anchor" href="#breaking-finalization"></a>8.19.1. Removal of finalization</h4>
<div class="paragraph">
<p>With the removal of finalization, the replacement cleanup has been simplified, and in some cases left out entirely.</p>
</div>
<div class="paragraph">
<p>Possible effects include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a close/cleanup is performed by the <code>Cleaner</code>, listeners will not get notified.
Given it is unlikely there will not be strong reference to an object if something is still interested in its listener events, we think this is acceptable.</p>
</li>
<li>
<p>The closing of a pure Java connection which was not explicitly closed is now simply a socket close handled by the cleanup action of the socket itself.
Server-side this may result in delayed cleanup of a connection and its resources, and occurrences of &#8220;connection reset by peer&#8221; (e.g. error 10054 on Windows, error 104 on Linux).
If you see an increase of these errors, we recommend you hunt for connection leaks in your application.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="breaking-double-bigdecimal"><a class="anchor" href="#breaking-double-bigdecimal"></a>8.19.2. Conversion from double to BigDecimal</h4>
<div class="paragraph">
<p>Conversions from <code>double</code> to <code>java.math.BigDecimal</code> now always use <code>BigDecimal.valueOf(double)</code>.
Previously, a combination of <code>new BigDecimal(double)</code> and <code>BigDecimal.valueOf(double)</code> was used.</p>
</div>
<div class="paragraph">
<p>This change may result in minor differences in precision or rounding of values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="breaking-changes-for-jaybird-7"><a class="anchor" href="#breaking-changes-for-jaybird-7"></a>8.20. Breaking changes for Jaybird 7</h3>
<div class="paragraph">
<p>With Jaybird 7 the following breaking changes will be introduced.</p>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-classes-packages-and-methods-7"><a class="anchor" href="#removal-of-deprecated-classes-packages-and-methods-7"></a>8.20.1. Removal of deprecated classes, packages and methods</h4>
<div class="sect4">
<h5 id="removal-of-deprecated-methods-7"><a class="anchor" href="#removal-of-deprecated-methods-7"></a>Removal of deprecated methods</h5>
<div class="paragraph">
<p>The following methods will be removed in Jaybird 7:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GDSFactoryPlugin</code> (semi-internal API)</p>
<div class="ulist">
<ul>
<li>
<p><code>getTypeAliases()</code>&#8201;&#8212;&#8201;use <code>getTypeAliasList()</code></p>
</li>
<li>
<p><code>getSupportedProtocols</code>&#8201;&#8212;&#8201;use <code>getSupportedProtocolList()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>GDSHelper</code> (internal API)</p>
<div class="ulist">
<ul>
<li>
<p><code>startTransaction(TransactionParameterBuffer)</code>&#8201;&#8212;&#8201;use <code>FbDatabase.startTransaction(TransactionParameterBuffer)</code> followed by <code>GDSHelper.setCurrentTransaction(FbTransaction)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>FirebirdStatement</code></p>
<div class="ulist">
<ul>
<li>
<p><code>getCurrentResultSet()</code>&#8201;&#8212;&#8201;use <code>getResultSet()</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>SqlCountHolder</code> (internal API)</p>
<div class="ulist">
<ul>
<li>
<p><code>getLongUpdateCount()</code>&#8201;&#8212;&#8201;use <code>updateCount()</code></p>
</li>
<li>
<p><code>getLongDeleteCount()</code>&#8201;&#8212;&#8201;use <code>deleteCount()</code></p>
</li>
<li>
<p><code>getLongInsertCount()</code>&#8201;&#8212;&#8201;use <code>insertCount()</code></p>
</li>
<li>
<p><code>getLongSelectCount()</code>&#8201;&#8212;&#8201;use <code>selectCount()</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="removal-of-deprecated-classes-7"><a class="anchor" href="#removal-of-deprecated-classes-7"></a>Removal of deprecated classes</h5>
<div class="paragraph">
<p>The following classes have been deprecated and will be removed in Jaybird 7:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>GDSException</code>;
use <code>SQLException</code> or one of its (normal) subclasses.
Previous versions of <code>GDSFactoryPlugin</code> declared <code>throws GDSException</code> for some methods, but now <code>throws SQLException</code>.
To retain some semblance of backwards-compatibility, this class was retrofitted to extend <code>SQLException</code>.</p>
</li>
<li>
<p><code>FBSQLException</code>;
use <code>SQLException</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="removal-of-deprecated-constants-7"><a class="anchor" href="#removal-of-deprecated-constants-7"></a>8.20.2. Removal of deprecated constants</h4>
<div class="paragraph">
<p>The following constants have been deprecated and will be removed in Jaybird 7:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ISCConstants</code></p>
<div class="ulist">
<ul>
<li>
<p><code>isc_isc_sql_dialect_conflict_num</code> (was already deprecated, now for removal);
use <code>isc_sql_dialect_conflict_num</code></p>
</li>
<li>
<p><code>isc_err_max</code>;
there is no replacement</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>QuoteStrategy</code>&#8201;&#8212;&#8201;due to addition of methods <code>appendLiteral</code> and <code>quoteLiteral</code> the original enum names no longer made sense</p>
<div class="ulist">
<ul>
<li>
<p><code>NO_QUOTES</code>&#8201;&#8212;&#8201;use <code>DIALECT_1</code></p>
</li>
<li>
<p><code>QUOTES</code>&#8201;&#8212;&#8201;use <code>DIALECT_3</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>SQLStateConstants</code></p>
<div class="ulist">
<ul>
<li>
<p><code>SQL_STATE_CONNECTION_CLOSED</code> (<code>08003</code>);
use <code>SQL_STATE_CONNECTION_FAILURE</code> (<code>08006</code>).
The use of <code>08003</code> for a closed connection error was wrong, and has been updated to use <code>08006</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatibility-notes"><a class="anchor" href="#compatibility-notes"></a>9. Compatibility notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="type-2-native-and-embedded-driver"><a class="anchor" href="#type-2-native-and-embedded-driver"></a>9.1. Type 2 (native) and embedded driver</h3>
<div class="paragraph">
<p>Since Jaybird 6, the native and embedded part of the driver has been moved to a separate artifact, <code>jaybird-native</code>.
The Jaybird Native GDS Factory plugin uses JNA to access the client library.
If you want to use the Type 2 driver, or Firebird embedded, then you need to include <code>jaybird-native-6.0.2</code> and <code>jna-jpms-5.17.0.jar</code> on the classpath.</p>
</div>
<div class="paragraph">
<p>When using Maven, you need to specify the dependency on <code>jaybird-native</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;jaybird-native&lt;/artifactId&gt;
    &lt;version&gt;6.0.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>fbclient.dll</code>, <code>fbembed.dll</code>, <code>libfbclient.so</code>, or <code>libfbembed.so</code> need to be on the path, or the location needs to be specified in the system property <code>jna.library.path</code> (as an absolute or relative path to the directory/directories containing the library file(s)).</p>
</div>
<div class="paragraph">
<p>For Windows and Linux, you can add the <code>org.firebirdsql.jdbc:fbclient</code> dependency on your classpath to provide the native libraries for the <code>native</code> and <code>local</code> protocol.
Be aware that this dependency does not support <code>embedded</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;fbclient&lt;/artifactId&gt;
    &lt;version&gt;5.0.2.0&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about this library, see <a href="https://github.com/mrotteveel/jaybird-fbclient" class="bare" target="_blank" rel="noopener">https://github.com/mrotteveel/jaybird-fbclient</a>.</p>
</div>
<div class="paragraph">
<p>In the future we may provide JARs with the embedded libraries of a specific Firebird version.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. since Firebird 3.0.2, version 13 for 3.0.0 and 3.0.1
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Jaybird has no protocol 14 implementation
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. Jaybird has no protocol 17 implementation
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. since Firebird 5.0.3, version 18 for 5.0.0&#8201;&#8212;&#8201;5.0.2
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. The wide range of the percentages is due to running the test with a single hop and two hops between client and server, and thus a wide range of latency.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. For <em>get</em> the maximum segment size is actually the maximum buffer size to receive one or more segments which are prefixed with two bytes for the length
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-05-31 11:01:47 +0200
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script>
<script>
    // https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.js
    !function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(o){var l,r,i;!function(o,s){r=[],l=function(e){"use strict";var t,o,l,r=n(2),i={},s={},c=n(3),a=n(4),u=n(5),d=!!(e&&e.document&&e.document.querySelector&&e.addEventListener);if("undefined"==typeof window&&!d)return;var f=Object.prototype.hasOwnProperty;function m(e,t,n){var o,l;return t||(t=250),function(){var r=n||this,i=+new Date,s=arguments;o&&i<o+t?(clearTimeout(l),l=setTimeout(function(){o=i,e.apply(r,s)},t)):(o=i,e.apply(r,s))}}return s.destroy=function(){if(!i.skipRendering)try{document.querySelector(i.tocSelector).innerHTML=""}catch(e){console.warn("Element not found: "+i.tocSelector)}i.scrollContainer&&document.querySelector(i.scrollContainer)?(document.querySelector(i.scrollContainer).removeEventListener("scroll",this._scrollListener,!1),document.querySelector(i.scrollContainer).removeEventListener("resize",this._scrollListener,!1),t&&document.querySelector(i.scrollContainer).removeEventListener("click",this._clickListener,!1)):(document.removeEventListener("scroll",this._scrollListener,!1),document.removeEventListener("resize",this._scrollListener,!1),t&&document.removeEventListener("click",this._clickListener,!1))},s.init=function(e){if(d&&(i=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)f.call(n,o)&&(e[o]=n[o])}return e}(r,e||{}),this.options=i,this.state={},i.scrollSmooth&&(i.duration=i.scrollSmoothDuration,i.offset=i.scrollSmoothOffset,s.scrollSmooth=n(6).initSmoothScrolling(i)),t=c(i),o=a(i),this._buildHtml=t,this._parseContent=o,s.destroy(),null!==(l=o.selectHeadings(i.contentSelector,i.headingSelector)))){var h=o.nestHeadingsArray(l).nest;i.skipRendering||t.render(i.tocSelector,h),this._scrollListener=m(function(e){t.updateToc(l),!i.disableTocScrollSync&&u(i);var n=e&&e.target&&e.target.scrollingElement&&0===e.target.scrollingElement.scrollTop;(e&&(0===e.eventPhase||null===e.currentTarget)||n)&&(t.updateToc(l),i.scrollEndCallback&&i.scrollEndCallback(e))},i.throttleTimeout),this._scrollListener(),i.scrollContainer&&document.querySelector(i.scrollContainer)?(document.querySelector(i.scrollContainer).addEventListener("scroll",this._scrollListener,!1),document.querySelector(i.scrollContainer).addEventListener("resize",this._scrollListener,!1)):(document.addEventListener("scroll",this._scrollListener,!1),document.addEventListener("resize",this._scrollListener,!1));var p=null;return this._clickListener=m(function(e){i.scrollSmooth&&t.disableTocAnimation(e),t.updateToc(l),p&&clearTimeout(p),p=setTimeout(function(){t.enableTocAnimation()},i.scrollSmoothDuration)},i.throttleTimeout),i.scrollContainer&&document.querySelector(i.scrollContainer)?document.querySelector(i.scrollContainer).addEventListener("click",this._clickListener,!1):document.addEventListener("click",this._clickListener,!1),this}},s.refresh=function(e){s.destroy(),s.init(e||this.options)},e.tocbot=s,s}(o),void 0===(i="function"==typeof l?l.apply(t,r):l)||(e.exports=i)}(void 0!==o?o:this.window||this.global)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:!1,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:!0,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(e){},headingsOffset:1,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1,onClick:function(e){},orderedList:!0,scrollContainer:null,skipRendering:!1,headingLabelCallback:!1,ignoreHiddenElements:!1,headingObjectCallback:null,basePath:"",disableTocScrollSync:!1}},function(e,t){e.exports=function(e){var t=[].forEach,n=[].some,o=document.body,l=!0,r=" ";function i(n,o){var l=o.appendChild(function(n){var o=document.createElement("li"),l=document.createElement("a");e.listItemClass&&o.setAttribute("class",e.listItemClass);e.onClick&&(l.onclick=e.onClick);e.includeHtml&&n.childNodes.length?t.call(n.childNodes,function(e){l.appendChild(e.cloneNode(!0))}):l.textContent=n.textContent;return l.setAttribute("href",e.basePath+"#"+n.id),l.setAttribute("class",e.linkClass+r+"node-name--"+n.nodeName+r+e.extraLinkClasses),o.appendChild(l),o}(n));if(n.children.length){var c=s(n.isCollapsed);n.children.forEach(function(e){i(e,c)}),l.appendChild(c)}}function s(t){var n=e.orderedList?"ol":"ul",o=document.createElement(n),l=e.listClass+r+e.extraListClasses;return t&&(l+=r+e.collapsibleClass,l+=r+e.isCollapsedClass),o.setAttribute("class",l),o}return{enableTocAnimation:function(){l=!0},disableTocAnimation:function(t){var n=t.target||t.srcElement;"string"==typeof n.className&&-1!==n.className.indexOf(e.linkClass)&&(l=!1)},render:function(e,t){var n=s(!1);t.forEach(function(e){i(e,n)});var o=document.querySelector(e);if(null!==o)return o.firstChild&&o.removeChild(o.firstChild),0===t.length?o:o.appendChild(n)},updateToc:function(i){var s;s=e.scrollContainer&&document.querySelector(e.scrollContainer)?document.querySelector(e.scrollContainer).scrollTop:document.documentElement.scrollTop||o.scrollTop,e.positionFixedSelector&&function(){var t;t=e.scrollContainer&&document.querySelector(e.scrollContainer)?document.querySelector(e.scrollContainer).scrollTop:document.documentElement.scrollTop||o.scrollTop;var n=document.querySelector(e.positionFixedSelector);"auto"===e.fixedSidebarOffset&&(e.fixedSidebarOffset=document.querySelector(e.tocSelector).offsetTop),t>e.fixedSidebarOffset?-1===n.className.indexOf(e.positionFixedClass)&&(n.className+=r+e.positionFixedClass):n.className=n.className.split(r+e.positionFixedClass).join("")}();var c,a=i;if(l&&null!==document.querySelector(e.tocSelector)&&a.length>0){n.call(a,function(t,n){return function t(n){var o=0;return n!==document.querySelector(e.contentSelector&&null!=n)&&(o=n.offsetTop,e.hasInnerContainers&&(o+=t(n.offsetParent))),o}(t)>s+e.headingsOffset+10?(c=a[0===n?n:n-1],!0):n===a.length-1?(c=a[a.length-1],!0):void 0});var u=document.querySelector(e.tocSelector).querySelectorAll("."+e.linkClass);t.call(u,function(t){t.className=t.className.split(r+e.activeLinkClass).join("")});var d=document.querySelector(e.tocSelector).querySelectorAll("."+e.listItemClass);t.call(d,function(t){t.className=t.className.split(r+e.activeListItemClass).join("")});var f=document.querySelector(e.tocSelector).querySelector("."+e.linkClass+".node-name--"+c.nodeName+'[href="'+e.basePath+"#"+c.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/@])/g,"\\$1")+'"]');-1===f.className.indexOf(e.activeLinkClass)&&(f.className+=r+e.activeLinkClass);var m=f.parentNode;m&&-1===m.className.indexOf(e.activeListItemClass)&&(m.className+=r+e.activeListItemClass);var h=document.querySelector(e.tocSelector).querySelectorAll("."+e.listClass+"."+e.collapsibleClass);t.call(h,function(t){-1===t.className.indexOf(e.isCollapsedClass)&&(t.className+=r+e.isCollapsedClass)}),f.nextSibling&&-1!==f.nextSibling.className.indexOf(e.isCollapsedClass)&&(f.nextSibling.className=f.nextSibling.className.split(r+e.isCollapsedClass).join("")),function t(n){return-1!==n.className.indexOf(e.collapsibleClass)&&-1!==n.className.indexOf(e.isCollapsedClass)?(n.className=n.className.split(r+e.isCollapsedClass).join(""),t(n.parentNode.parentNode)):n}(f.parentNode.parentNode)}}}}},function(e,t){e.exports=function(e){var t=[].reduce;function n(e){return e[e.length-1]}function o(t){if(!(t instanceof window.HTMLElement))return t;if(e.ignoreHiddenElements&&(!t.offsetHeight||!t.offsetParent))return null;var n={id:t.id,children:[],nodeName:t.nodeName,headingLevel:function(e){return+e.nodeName.split("H").join("")}(t),textContent:e.headingLabelCallback?String(e.headingLabelCallback(t.textContent)):t.textContent.trim()};return e.includeHtml&&(n.childNodes=t.childNodes),e.headingObjectCallback?e.headingObjectCallback(n,t):n}return{nestHeadingsArray:function(l){return t.call(l,function(t,l){var r=o(l);return r&&function(t,l){for(var r=o(t),i=r.headingLevel,s=l,c=n(s),a=i-(c?c.headingLevel:0);a>0;)(c=n(s))&&void 0!==c.children&&(s=c.children),a--;i>=e.collapseDepth&&(r.isCollapsed=!0),s.push(r)}(r,t.nest),t},{nest:[]})},selectHeadings:function(t,n){var o=n;e.ignoreSelector&&(o=n.split(",").map(function(t){return t.trim()+":not("+e.ignoreSelector+")"}));try{return document.querySelector(t).querySelectorAll(o)}catch(e){return console.warn("Element not found: "+t),null}}}}},function(e,t){e.exports=function(e){var t=document.querySelector(e.tocSelector);if(t&&t.scrollHeight>t.clientHeight){var n=t.querySelector("."+e.activeListItemClass);n&&(t.scrollTop=n.offsetTop)}}},function(e,t){function n(e,t){var n=window.pageYOffset,o={duration:t.duration,offset:t.offset||0,callback:t.callback,easing:t.easing||d},l=document.querySelector('[id="'+decodeURI(e).split("#").join("")+'"]'),r=typeof e==="string"?o.offset+(e?l&&l.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):e,i=typeof o.duration==="function"?o.duration(r):o.duration,s,c;function a(e){c=e-s;window.scrollTo(0,o.easing(c,n,r,i));if(c<i){requestAnimationFrame(a)}else{u()}}function u(){if(window.scrollTo(0,n+r),"function"==typeof o.callback){o.callback()}}function d(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}requestAnimationFrame(function(e){s=e;a(e)})}t.initSmoothScrolling=function(e){document.documentElement.style;var t=e.duration,o=e.offset,l=location.hash?r(location.href):location.href;function r(e){return e.slice(0,e.lastIndexOf("#"))}!function(){document.body.addEventListener("click",function(i){if(!function(e){return"a"===e.tagName.toLowerCase()&&(e.hash.length>0||"#"===e.href.charAt(e.href.length-1))&&(r(e.href)===l||r(e.href)+"#"===l)}(i.target)||i.target.className.indexOf("no-smooth-scroll")>-1||"#"===i.target.href.charAt(i.target.href.length-2)&&"!"===i.target.href.charAt(i.target.href.length-1)||-1===i.target.className.indexOf(e.linkClass))return;n(i.target.hash,{duration:t,offset:o,callback:function(){!function(e){var t=document.getElementById(e.substring(1));t&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())}(i.target.hash)}})},!1)}()}}]);
</script>
<script>
    /* Tocbot dynamic TOC, based on https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 */
    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    tocbot.init({ contentSelector: '#content',
        headingSelector: 'h1, h2, h3, h4',
        ignoreSelector: '.float',
        scrollSmooth: false });
    var handleTocOnResize = function() {
        var width = window.innerWidth
            || document.documentElement.clientWidth
            || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                ignoreSelector: '.float',
                collapseDepth: 6,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                scrollSmooth: false });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                ignoreSelector: '.float',
                scrollSmooth: false });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    handleTocOnResize();
</script>
</body>
</html>